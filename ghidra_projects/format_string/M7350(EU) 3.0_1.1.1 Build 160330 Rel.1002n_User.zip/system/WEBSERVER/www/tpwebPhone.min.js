/* =============================================================
 * Copyright (c) 2014 TP-LINK Technologies Co., Ltd.
 *
 * @version: 0.0.1
 * @author: TP-Mobile Web Team
 * =============================================================*/

function callJSON(a,b,c,d,e,f,g){if("undefined"==typeof a||"undefined"==typeof b)throw"moduleName or action can not be empty";var h=$.extend({module:a,action:b},c);if(a===WEB_MODULE&&(b===AJAX_ACTION.KEEP_ALIVE||b===AJAX_ACTION.UNSET_DEFAULT)||a===AUTH_MODULE&&(b===AJAX_ACTION.CLOSE||b===AJAX_ACTION.UPDATE)||a!==WEB_MODULE&&a!==AUTH_MODULE){var i=AuthModel.getToken();if(i)h=$.extend({token:i},h);else if("status"!==a)return AuthModel.promptNotAuth(),void 0}var j=a===AUTH_MODULE?AUTH_CGI:WEB_CGI,k=null;return $.ajax({type:"POST",url:j,async:g===!1?!1:!0,data:JSON.stringify(h),dataType:"json",processData:!1,cache:!1,timeout:"number"==typeof f?f:ajaxTimeout,success:function(a,b,c){if("string"==typeof a)try{a=JSON.parse(a)}catch(f){return"function"==typeof e&&e(f),void 0}return a.result<0?(AuthModel.removeAuthToken(),-2===a.result?AuthModel.kickedOut():-3===a.result?AuthModel.authTimeout():AuthModel.promptNotAuth(),void 0):("function"==typeof d&&d(a,b,c),g===!1&&(k=a),void 0)},error:function(a,b,c){return"function"==typeof e&&e(a,b,c),g===!1?null:void 0}}),g===!1?k:void 0}function getConfigJSON(a,b,c,d,e){callJSON(a,0,null,b,c,d,e)}function ipverify(a){var b=/^(([1-9]?\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}([1-9]?\d|1\d{2}|2[0-4]\d|25[0-5])$/;return b.test(a)}function is_ipaddr(a){var b=!0;b=a?ipverify(a):!1,/^(\d*)/.test(a);var c=Number(RegExp.$1);return 127===c||c>=224&&239>=c?!1:b}function is_privateIPaddr(a){if("192.168."===a.substring(0,8))return!0;if("172."===a.substring(0,4)){var b=a.substring(4,6);if("."===a.substring(6,7)&&parseInt(b)>=16&&parseInt(b)<=31)return!0}return"10."===a.substring(0,3)?!0:!1}function is_gatewayaddr(a){return is_ipaddr(a)}function is_dnsaddr(a){return is_ipaddr(a)}function is_number(a,b,c){var d,e,f="0123456789.",g=0;if("."===a.charAt(0))return!1;if(1!==a.length&&"0"===a.charAt(0)&&"."!==a.charAt(1))return!1;for(var h=0;h<a.length;h++){if(e=a.charAt(h),-1===f.indexOf(e))return!1;"."===e&&g++}return g>1?!1:(d=parseInt(a,10),d>=b&&c>=d)}function is_integer(a,b,c){var d,e,f="0123456789";if(1!==a.length&&"0"===a.charAt(0))return!1;for(var g=0;g<a.length;g++)if(e=a.charAt(g),-1===f.indexOf(e))return!1;return d=parseInt(a,10),d>=b&&c>=d}function dotIpToInt(a){for(var b,c=0,d=0,e=0,f=0;3>f;f++)e=a.indexOf(".",d),b=a.substring(d,e),c+=parseInt(b,10)<<8*(3-f),d=e+1;return b=a.substr(d),c+=parseInt(b,10)}function chkIpInNetwork(a,b,c){var d=dotIpToInt(a),e=dotIpToInt(b),f=dotIpToInt(c);return 0===d||0===e||0===f?0:(4026531840&d)>=3758096384||0===(4278190080&d)||2130706432===(4278190080&d)?0:(e&f)!==(d&f)?0:0===(d&~f)||(d&~f)===~f?2:1}function checkSsidSanity(a){for(var b,c="0123456789ABCDEFabcdefGHIJKLMNOPQRSTUVWXYZghijklmnopqrstuvwxyz`~!@#$%^&*()-=_+[]{};:'\"\\|/?.,<>/ ",d=0;32>d;d++)if(b=a.charAt(d),-1===c.indexOf(b))return!1;return!0}function checkWlanKeySanity(a){for(var b,c="0123456789ABCDEFabcdefGHIJKLMNOPQRSTUVWXYZghijklmnopqrstuvwxyz`~!@#$%^&*()-=_+[]{};:'\"\\|/?.,<>/ ",d=0;63>d;d++)if(b=a.charAt(d),-1===c.indexOf(b))return!1;return!0}function chkNetworkMask(a){var b,c=dotIpToInt(a),d=4294967295,e=1;if(0===c)return!1;for(b=0;32>b;b++){if(0!==(e&c))return c===d<<b;e<<=1}return!1}function chkIpMask(a,b){var c=dotIpToInt(a),d=dotIpToInt(b);return 0===(c&d)||d===(c&d)?!1:0===(c&~d)||~d===(c&~d)?!1:!0}function chkLanIp(a,b,c){var d=dotIpToInt(a),e=dotIpToInt(b),f=dotIpToInt(c);return 0===d||0===e||0===f?!1:d>=e&&f>=d?!1:!0}function isMobileNumValid(a){var b,c,d=0,e=a.length;if(e>20)return!1;var f=new Array(/^0607\+/,/^120609\+/);for(b=0;b<f.length;b++)if(a.match(f[b]))return!0;for(b=0;e>b;b++)if(c=a.charCodeAt(b),48>c||c>57){if(43!==c)return!1;if(d>0)return!1}else d++;return 0===e||d>0?!0:!1}function isEqual(a,b){if(typeof a!=typeof b)return!1;if("object"==typeof a){for(var c in a){if("undefined"==typeof b[c])return!1;if(!isEqual(a[c],b[c]))return!1}return!0}return a===b}function checkBrowserType(){var a,b=navigator.userAgent.toLowerCase(),c={};return a==b.match(/msie ([\d.]+)/)?(c.ie=!0,c.info="ie"):a==b.match(/firefox\/([\d.]+)/)?(c.ff=!0,c.info="ff"):a==b.match(/chrome\/([\d.]+)/)?(c.chrome=!0,c.info="chrome"):a==b.match(/opera.([\d.]+)/)?(c.opera=!0,c.info="opera"):a==b.match(/version\/([\d.]+).*safari/)&&(c.safari=!0,c.info="safari"),c.version=a&&a[1]?parseFloat(a[1]):0,c}function isMobile(){var a={Android:function(){return navigator.userAgent.match(/Android/i)?!0:!1},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)?!0:!1},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)?!0:!1},Windows:function(){return navigator.userAgent.match(/IEMobile/i)?!0:!1},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Windows()}};return a}function isPhone(){return navigator.userAgent.match(/Mobile|Android|BlackBerry|webOS|IEMobile|Opera Mini|iPhone|iPod|\\bBB10\\b|PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino|Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Window Mobile|Windows Phone [0-9.]+|WCE;|Windows Phone 8.0|Windows Phone OS|MeeGo|Maemo|J2ME\/|\\bMIDP\\b|\\bCLDC\\b|\\bBada\\b|BREW/i)&&!navigator.userAgent.match(/iPad|Tablet|tablet/i)?!0:!1}function formatSMSDate(a){if(!a)return"error";var b,c,d,e=[],f=[],g=[];return g=a.split(" "),e=g[0].split("-"),f=g[1].split(":"),$.each(e,function(a,b){0===a?c="20"+b:c+="/"+b}),d=f[0]+":"+f[1],b=c+" "+d}function formatNumber(a){if(!a)return"error";var b=5>=a.length?a:a.substr(0,5)+"...";return b}function getIpv4Addr(a){var b=(255&a)+"."+(a>>8&255)+"."+(a>>16&255)+"."+(a>>24&255);return b}function getValLen(a){for(var b=0,c=a.length,d=0;c>d;d++){var e=a.charAt(d);b+=e>=" "&&"~">=e?1:2}return b}function isLoginPswValid(a){var b=/^[A-Za-z0-9-_]+$/;return a.match(b)?!0:!1}function devicenameValidation(a){for(var b,c="#: &;~|<>$%^!@",d=0;d<a.length;d++)if(b=a.charAt(d),-1!==c.indexOf(b))return!1;return!0}function dialnumberValidation(a){for(var b,c="0123456789#*",d=0;d<a.length;d++)if(b=a.charAt(d),-1===c.indexOf(b))return!1;return!0}function macVerify(a){var b,c="0123456789abcdefABCDEF";if(!a)return!1;var d=a.toLowerCase();if("ff:ff:ff:ff:ff:ff"===d)return!1;if("00:00:00:00:00:00"===d)return!1;if(17!==a.length)return!1;for(var e=0;17>e;e++)if(b=d.charAt(e),e%3===2){if(":"!==b&&"-"!==b)return!1}else if(-1===c.indexOf(b))return!1;return b=d.charAt(1),c.indexOf(b)%2===1?!1:!0}function pinValid(a){var b=a;if(!b)return!0;if(void 0===b)return!1;if(b.length<4||b.length>8)return!1;for(var c,d=0;d<b.length;d++)if(c=b.charCodeAt(d),48>c||c>57)return!1;return!0}function pukValid(a){var b=a;if(!b)return!0;if(void 0===b)return!1;if(8!==b.length)return!1;for(var c,d=0;d<b.length;d++)if(c=b.charCodeAt(d),48>c||c>57)return!1;return!0}function getTimeInt(){var a=new Date;return a.getTime()}function getValLen(a){for(var b=0,c=0;c<a.length;c++){var d=a.charAt(c);b+=d>=" "&&"~">=d?1:2}return b}function checkWpaKeySanity(a){if(!a)return!1;var b=getValLen(a);if(b>0&&8>b)return!1;if(!(b>=64))return checkWlanKeySanity(a);for(var c,d="0123456789ABCDEFabcdef",e=0;b>e;e++)if(c=a.charAt(e),-1===d.indexOf(c))return!1;return!0}function byteAdapt(a){a=Number(a);var b=0,c=new Array("Bytes","KB","MB","GB");if(!a||0>a)return[0,c[1]];do if(a/=1024,b++,3===b)break;while(a>=1024);a=a.toString();var d=a.indexOf(".");return-1!==d&&(a=a.substr(0,a.indexOf(".")+3)),a=Number(a),[a,c[b]]}function byte2MB(a){if(a=Number(a),!a||0>a)return 0;for(var b=0;2>b;b++)a/=1024;a=a.toString();var c=a.indexOf(".");return-1!==c&&(a=a.substr(0,a.indexOf(".")+3)),Number(a)}function byte2GB(a){if(a=Number(a),!a||0>a)return 0;for(var b=0;3>b;b++)a/=1024;a=a.toString();var c=a.indexOf(".");return-1!==c&&(a=a.substr(0,a.indexOf(".")+3)),Number(a)}function speedShow(a){var b="B/S";a=Number(a),a>1024&&(a/=1024,b="KB/S"),a=a.toString();var c=a.indexOf(".");return-1!==c&&(a=a.substr(0,a.indexOf(".")+3)),Number(a)+b}function checkPassword(a){var b,c=0,d=0,e=0,f=0,g=0,h="abcdefghijklmnopqrstuvwxyz",i="ABCDEFGHIJKLMNOPQRSTUVWXYZ",j="`~!@#$%^&*()-=_+[]{};:'\"\\|/?.,<>/",k="0123456789";if(0===a.length)return c;a.length<5?c+=5:a.length<8?c+=10:a.length>=8&&(c+=25);for(var l=0;l<a.length;l++)b=a.charAt(l),-1!==h.indexOf(b)?d++:-1!==i.indexOf(b)?e++:-1!==j.indexOf(b)?f++:-1!==k.indexOf(b)&&g++;return d===a.length||e===a.length?c+=10:d>0&&e>0&&(c+=25),g===a.length?c+=10:g>0&&(c+=25),f===a.length?c+=10:f>0&&(c+=25),(d>0||e>0)&&(d>0&&e>0&&f>0&&g>0?c+=5:f>0&&g>0?c+=3:g>0&&(c+=2)),c}function validUsername(a){return maxLen=15,model=/^[\x30-\x39\x41-\x5a\x61-\x7a\x5f]+$/,a?!model.test(a)||a.length>maxLen?2:0:1}function validPassword(a){return maxLen=15,model=/^[\x21-\x7e]+$/,a?!model.test(a)||a.length>maxLen?2:0:1}function isValidUsername(a){return model=/^[\x30-\x39\x41-\x5a\x61-\x7a\x5f]+$/,a&&model.test(a)?!0:!1}function isValidPassword(a){return model=/^[\x21-\x7e]+$/,a&&model.test(a)?!0:!1}function isProfileInputCharValid(a){var b,c,d="0123456789ABCDEFabcdefGHIJKLMNOPQRSTUVWXYZghijklmnopqrstuvwxyz`~!@#$%^&*()-=_+[]{}<>;:\\|/?.,/";for(c=0;32>c;c++)if(b=a.charAt(c),-1===d.indexOf(b))return!1;return!0}function isProfileNameValid(a){return a.match(/\(D\)$/)?!1:!0}function checkProName(a){var b,c,d=0,e="0123456789ABCDEFabcdefGHIJKLMNOPQRSTUVWXYZghijklmnopqrstuvwxyz`~!@#$%^&*()-=_+[]{}<>;:\\|/?.,/";if(""===a.val())return-1;for(c=0;32>c;c++)if(b=a.val().charAt(c),-1===e.indexOf(b))return-2;if(a.val().match(/\(D\)$/))return-4;for(c=0;c<proList.list.length;c++)a.val()===proList.list[c].profileName&&d++;return d>1?-3:1}function replace_script_tag(a){var b=a.replace(/</g,"&lt;");return b=b.replace(/>/g,"&gt;")}function get_ua_type(){var a,b,c,d,e={windows:!1,windowsphone:!1,unixpc:!1,ipad:!1,iphone:!1,imacpc:!1,ipod:!1,android:!1,android_uc:!1,android2x:!1,nokia:!1,player:!1,leIE7:!1,leIE8:!1,isMobile:!1};try{a=window.navigator.platform.toLowerCase(),b=window.navigator.userAgent.toLowerCase(),c=window.navigator.appVersion.toLowerCase(),d=window.navigator.appName.toLowerCase()}catch(f){return{}}if(!a)return b.indexOf("android")>=0?(e.android=!0,e.isMobile=!0,e):(e.isMobile=document.body.clientWidth>=1024||document.body.clientHeight>=1024?!1:!0,e);if("microsoft internet explorer"===d){var g=c.split(";")[1],h=Number(g.split("msie")[1]);return h?(8>=h&&(e.leIE8=!0),7>=h&&(e.leIE7=!0)):document.documentMode&&(document.documentMode<=8&&(e.leIE8=!0),document.documentMode<=7&&(e.leIE7=!0)),e}return a.indexOf("win")>=0?(e.windows=!0,b.indexOf("windows phone")>=0?(e.windowsPhone=!0,e.isMobile=!0):e.isMobile=!1,e):b.indexOf("nokia")>=0?(e.nokia=!0,e.isMobile=!0,e):b.indexOf("android")>=0?(e.android=!0,e.isMobile=!0,(b.indexOf("android 2")>=0||c.indexOf("android 2")>=0)&&(e.android2x=!0),e):a.indexOf("ipad")>=0?(e.iPad=!0,e.isMobile=!1,e):a.indexOf("iphone")>=0?(e.iPhone=!0,e.isMobile=!0,e):a.indexOf("ipod")>=0?(e.iPod=!0,e.isMobile=!0,e):b.indexOf("wii")>=0||b.indexOf("playstation")>=0?(e.player=!0,e.isMobile=!0,e):a.indexOf("mac")>=0?(e.iMacPC=!0,e.isMobile=!1,e):a.indexOf("x11")>=0||a.indexOf("linux")>=0&&a.indexOf("arm")<0?(e.unixPC=!0,e.isMobile=!1,e):void 0}function PhonePage(a){function b(){return AuthModel.getToken()}function c(){var b=window.innerHeight,c=a("#pageHeader").height(),d=0,e=0,f=354,g=354;a("#pageFooter").is(":visible")&&(d=a("#pageFooter").height()),e=b-c-d-1,g=b-c-1,f>e&&(e=f),a(".fullPage").css({height:e+"px"})}function d(b){r&&a[r].onLeave&&a[r].onLeave(),r=b,a[b].onEnter&&a[b].onEnter(),"login"!==b&&phonePage.beginHeartbeat()}function e(b,c){var d=m[c];if(b.siblings().hide(),b.show(),a("#pageHeaderTitle").text(d.header),d.footer!==!1){var e=a("#"+d.footer);a("#pageFooter").show(),e.siblings(".active").removeClass("active"),a("#statusImg").attr("src","images/phone/status.png"),a("#smsImg").attr("src","images/phone/sms.png"),a("#dialUpImg").attr("src","images/phone/dial-up.png"),a("#wirelessImg").attr("src","images/phone/wireless.png"),a("#deviceImg").attr("src","images/phone/device.png"),e.addClass("active"),e.find("img").attr("src","images/phone/"+d.header.toLocaleLowerCase()+"-sel.png")}else a("#pageFooter").hide()}function f(b){var c;c=m[b],c.backTarget?a("#backBtn").unbind("click").on("click."+b,function(){n.setContentPage(c.backTarget)}).show():a("#backBtn").hide(),c.confirmTarget?a("#confirmBtn").unbind("click").click(function(){"function"==typeof onConfirmBtnClick&&onConfirmBtnClick()!==!1&&(n.setContentPage(c.confirmTarget),onConfirmBtnClick=null)}).show():a("#confirmBtn").hide()}function g(){a("#footerTab1").click(function(){n.setContentPage("status")}),a("#footerTab2").click(function(){n.setContentPage("msg")}),a("#footerTab3").click(function(){n.setContentPage("dialup")}),a("#footerTab4").click(function(){n.setContentPage("wireless")}),a("#footerTab5").click(function(){n.setContentPage("device")}),a("#confirmPopup").popup({noXButton:!0,$closeButtons:a("#confirmCancel")})}function h(){callJSON(p,q.GET_LANGUAGE,null,function(b){a.i18n.setLocale(b.language)},null,null,!1)}function i(){getConfigJSON("status",function(a){document.title=a.deviceInfo.model,a.deviceInfo.hardwareVer.indexOf("3.0")>0&&(region=new_region),dualIPVersionSupport=a.wan.dualIPVersionSupport?!0:!1})}function j(){m={first:"status",status:{id:"statusContent",backTarget:!1,confirmTarget:"status",header:a.i18n.prop("pStatusHeader"),footer:"footerTab1"},msg:{id:"msgContent",backTarget:!1,confirmTarget:!1,header:a.i18n.prop("pMsgHeader"),footer:"footerTab2"},dialup:{id:"dialupContent",backTarget:"dialup",confirmTarget:"dialup",header:a.i18n.prop("pDialupHeader"),footer:"footerTab3"},dialupProfileDetail:{id:"dialupProfileDetailContent",backTarget:"dialup",confirmTarget:!1,header:a.i18n.prop("pDialupProfileDetailHeader"),footer:!1},wireless:{id:"wirelessContent",backTarget:"false",confirmTarget:"wireless",header:a.i18n.prop("pWirelessHeader"),footer:"footerTab4"},device:{id:"deviceContent",backTarget:!1,confirmTarget:!1,header:a.i18n.prop("pDeviceHeader"),footer:"footerTab5"},dataSettings:{id:"dataSettingsContent",backTarget:"device",confirmTarget:"dataSettings",header:a.i18n.prop("pDataSettingsHeader"),footer:!1},msgWrite:{id:"msgWriteContent",backTarget:"msg",confirmTarget:"msg",header:a.i18n.prop("pMsgWriteIndex"),footer:!1},msgInbox:{id:"msgInboxContent",backTarget:"msg",confirmTarget:!1,header:a.i18n.prop("pMsgInbox"),footer:!1},msgRead:{id:"msgReadContent",backTarget:"msgInbox",confirmTarget:!1,header:a.i18n.prop("pMsgRead"),footer:!1},msgReply:{id:"msgReplyContent",backTarget:"msgRead",confirmTarget:"msgRead",header:a.i18n.prop("pMsgReply"),footer:!1},modifyPasswd:{id:"modifyPasswdContent",backTarget:"device",confirmTarget:"modifyPasswd",header:a.i18n.prop("pModifyPasswdHeader"),footer:!1},shutdown:{id:"shutdownContent",backTarget:"device",confirmTarget:!1,header:a.i18n.prop("pShutdownHeader"),footer:!1},powerSaving:{id:"powerSavingContent",backTarget:"device",confirmTarget:"powerSaving",header:a.i18n.prop("pPowerSavingHeader"),footer:!1},about:{id:"aboutContent",backTarget:"device",confirmTarget:!1,header:a.i18n.prop("pAboutHeader"),footer:!1},advanced:{id:"advancedContent",backTarget:"device",confirmTarget:!1,header:a.i18n.prop("pAdvHeader"),footer:!1},networkMode:{id:"networkModeContent",backTarget:"advanced",confirmTarget:"networkMode",header:a.i18n.prop("pNetworkModeHeader"),footer:!1},pinManagement:{id:"pinManagementContent",backTarget:"advanced",confirmTarget:"pinManagement",header:a.i18n.prop("pPinManagementHeader"),footer:!1},onlineClients:{id:"onlineClientsContent",backTarget:"advanced",confirmTarget:!1,header:a.i18n.prop("pOnlineClientsHeader"),footer:!1},blackList:{id:"blackListContent",backTarget:"advanced",confirmTarget:!1,header:a.i18n.prop("pBlackListHeader"),footer:!1},storageSharing:{id:"storageSharingContent",backTarget:"advanced",confirmTarget:"storageSharing",header:a.i18n.prop("pStorageSharingHeader"),footer:!1},wps:{id:"wpsContent",backTarget:"advanced",confirmTarget:"wps",header:a.i18n.prop("pWpsHeader"),footer:!1},timeSettings:{id:"timeSettingsContent",backTarget:"advanced",confirmTarget:"timeSettings",header:a.i18n.prop("pTimeSettingsHeader"),footer:!1},firmwareUpdate:{id:"firmwareUpdateContent",backTarget:"advanced",confirmTarget:!1,header:a.i18n.prop("pFirmwareUpdateHeader"),footer:!1}},a.i18n.elementLocalization("body",["a","span","button"]),g(),b()&&n.loadContent()}function k(b,c){a.ajax({type:"GET",url:b,dataType:"html",async:!1,success:function(a){"function"==typeof c&&c(a)}})}function l(){callJSON(p,2)}var m,n=this,o=!1,p="webServer",q={GET_LANGUAGE:0,SET_LANGUAGE:1},r=null,s={pinReq:4,pukReq:6,permanentLock:7};this.loadContent=function(){window.location.search&&(window.location.href="phoneIndex.html"),a("#loginView").hide(),a("#coverView").hide(),a("#contentPanelView").show(),getConfigJSON("status",function(a){a.factoryDefault&&a.wan.simStatus!==s.pinReq&&a.wan.simStatus!==s.pukReq&&a.wan.simStatus!==s.permanentLock?(modifyPswRemind=!0,n.setContentPage("modifyPasswd")):n.setContentPage()}),window.onresize=function(){c()}},this.loadLogin=function(b){a("#contentPanelView").hide(),a("#coverView").hide(),void 0!==b?"timeout"===b?window.location.href="phoneIndex.html?timeout":"kickedOut"===b&&(window.location.href="phoneIndex.html?kickedOut"):a("#loginView").text()?(a("#loginView").show(),"timeout"===b?phonePage.showToast(a.i18n.prop("sessionTimeout")):"kickedOut"===b&&phonePage.showToast(a.i18n.prop("kickedOut"))):(k("phoneHTML/login.html",function(b){a("#loginView").append(b).show(),a.i18n.elementLocalization("#loginView",["span","button","a","option"])}),a.login.onLoad()),d("login")},this.setContentPage=function(b){b=b||m.first;var g=m[b],h=a("#"+g.id);h[0]?(e(h,b),f(b)):k("phoneHTML/"+b+".html",function(c){a("#pageContent").append(c),h=a("#"+g.id),a.i18n.elementLocalization(h,["a","span","label","button","option","p"]),e(h,b),f(b),a[b].onLoad&&a[b].onLoad()}),d(b),c()},this.showToast=function(b,c,d){null===c?a(".toastIcon").hide():c||(c=imagePath+"warning.png"),"images/phone/saved.png"===c||"images/phone/saveFail.png"===c?a(".toastText").css("width","auto"):a(".toastText").css("width","82%"),c&&a(".toastIcon").attr("src",c).show(),a(".toastText").text(b),void 0===d&&(d=1500),a("#coverView").show(),d>0?(o=!1,a(".toast").fadeIn(500,function(){o||setTimeout(n.hideToast,d)})):(o=!0,a(".toast").fadeIn(500))},this.beginProcess=function(b,c){var d=window.innerHeight,e=.45*d;a(".process").css({"margin-top":e+"px"}),a("#coverView").css({height:"auto","background-color":"rgba(0, 0, 0, 0.4)"}).show(),this.setProcess(0),a("#phoneProcessDiv").show(),this.doProgress(b,c)},this.doProgress=function(b,c){var d=this,e=0,f=30;"number"!=typeof b&&(b=120);var g=setInterval(function(){e>=99?(clearInterval(g),a("#coverView").removeAttr("style").hide(),a("#phoneProcessDiv").hide(),"function"==typeof c&&c()):(e+=100/(1e3*b/f),d.setProcess(e))},f)},this.setProcess=function(b){a("#phoneProcessText").text(Math.floor(b)+"%"),a("#phoneProcessBar").css("width",b+"%")},this.hideToast=function(b,c){(!o||c)&&(b?(a(".toast").fadeOut(b),a("#coverView").hide()):a(".toast").fadeOut(500,function(){a("#coverView").hide()}))},this.beginHeartbeat=function(){null===heartbeatTimer&&(heartbeatTimer=setInterval(l,1e4))},this.endHeartbeat=function(){null!==heartbeatTimer&&void 0!==heartbeatTimer&&(clearInterval(heartbeatTimer),heartbeatTimer=null)},a(function(){h(),j(),i()})}var AUTH_MODULE="authenticator",WEB_MODULE="webServer",WEB_CGI="cgi-bin/qcmap_web_cgi",AUTH_CGI="cgi-bin/qcmap_auth",authAction={LOAD:0,LOGIN:1,CHECK_ATTEMPT:2,CLOSE:3,UPDATE:4},AJAX_ACTION={LOAD:0,LOGIN:1,CHECK_ATTEMPT:2,CLOSE:3,UPDATE:4,KEEP_ALIVE:2,UNSET_DEFAULT:3},unsetFacAction=3;ajaxTimeout=1e4;var AUTH_RES={success:0,hasLogin:1,pwdWrong:2,ipLocked:3,otherLogin:4,unknownResult:5},AuthModel={g_token:"",login:function(a,b,c){if(!a||!b)return null;var d=callJSON(AUTH_MODULE,authAction.LOAD,null,null,null,ajaxTimeout,!1);if(null===d)return console.log("Auth Request Error"),void 0;var e=CryptoJS.MD5([a,b,d.nonce].join(":")).toString(),f=callJSON(AUTH_MODULE,authAction.LOGIN,{digest:e},null,null,ajaxTimeout,!1);switch(f.result){case 0:AuthModel.setAuthToken(f.token),c(AUTH_RES.success);break;case 1:c(AUTH_RES.pwdWrong);break;default:c(AUTH_RES.unknownResult)}},setAuthToken:function(a){AuthModel.isCookieEnable()?$.cookie("tpweb_token",a):AuthModel.g_token=a},removeAuthToken:function(){AuthModel.isCookieEnable()?$.removeCookie("tpweb_token"):AuthModel.g_token=""},logout:function(a){var b=callJSON(AUTH_MODULE,authAction.CLOSE,null,null,null,ajaxTimeout,!1);AuthModel.removeAuthToken(),a(b)},getToken:function(){var a="";if(AuthModel.isCookieEnable()){var b=$.cookie("tpweb_token");b?a=b:AuthModel.promptNotAuth()}else AuthModel.g_token?a=g_token:AuthModel.promptNotAuth();return a},promptNotAuth:function(){phonePage.loadLogin()},authTimeout:function(){phonePage.loadLogin("timeout")},kickedOut:function(){phonePage.loadLogin("kickedOut")},isCookieEnable:function(){return $.cookie("check_cookie","check_cookie",{path:"/"}),"check_cookie"===$.cookie("check_cookie")}},dualIPVersionSupport=!0;!function(a){var b="";a.i18n.getLocale=function(){return b},a.i18n.setLocale=function(c,d){"string"==typeof c&&(b=c,a.i18n.properties({name:"str",path:"i18n/",language:c||"en",callback:function(){"function"==typeof d&&d()}}))},a.i18n.elementLocalization=function(b,c){var d,e,f,g,h=a(b);for(e=c.length-1;e>=0;e--)for(d=h.find(c[e]),f=d.length-1;f>=0;f--)g=a.i18n.prop(d[f].id),g&&d.eq(f).text(g)},a.i18n.switchFont=function(b){void 0===b&&(b=this.getLocale()),"cn"===b?(a("body").addClass("cnFont"),a("select").addClass("cnFont"),a("button").addClass("cnFont"),a("input").addClass("cnFont"),a("textarea").addClass("cnFont")):(a("body").removeClass("cnFont"),a("select").removeClass("cnFont"),a("button").removeClass("cnFont"),a("input").removeClass("cnFont"),a("textarea").removeClass("cnFont"))}}(jQuery);var PhonePanelNs={},region={AL:{country:"Albania",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},DZ:{country:"Algeria",shortBandBegin:1,shortBandEnd:13,longBand:[]},AR:{country:"Argentina",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},AM:{country:"Armenia",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},AU:{country:"Australia",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},AT:{country:"Austria",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},AZ:{country:"Azerbaijan",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},BH:{country:"Bahrain",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},BY:{country:"Belarus",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},BE:{country:"Belgium",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},BZ:{country:"Belize",shortBandBegin:1,shortBandEnd:13,longBand:[149,153,157,161,165]},BO:{country:"Bolivia",shortBandBegin:1,shortBandEnd:13,longBand:[149,153,157,161,165]},BR:{country:"Brazil",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},BN:{country:"Brunei Darussalam",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},BG:{country:"Bulgaria",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},CA:{country:"Canada",shortBandBegin:1,shortBandEnd:11,longBand:[36,40,44,48,149,153,157,161,165]},CL:{country:"Chile",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},CN:{country:"China",shortBandBegin:1,shortBandEnd:13,longBand:[149,153,157,161,165]},CO:{country:"Colombia",shortBandBegin:1,shortBandEnd:11,longBand:[36,40,44,48,149,153,157,161,165]},CR:{country:"Costa Rica",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},HR:{country:"Croatia",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},CY:{country:"Cyprus",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},CZ:{country:"Czech Republic",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},DK:{country:"Denmark",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},DO:{country:"Dominican Republic",shortBandBegin:1,shortBandEnd:11,longBand:[36,40,44,48,149,153,157,161,165]},EC:{country:"Ecuador",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},EG:{country:"Egypt",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},SV:{country:"El Salvador",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},EE:{country:"Estonia",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},FI:{country:"Finland",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},FR:{country:"France",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},GE:{country:"Georgia",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},DE:{country:"Germany",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},GR:{country:"Greece",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},GT:{country:"Guatemala",shortBandBegin:1,shortBandEnd:11,longBand:[36,40,44,48,149,153,157,161,165]},HN:{country:"Honduras",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},HK:{country:"Hong Kong",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},HU:{country:"Hungary",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},IS:{country:"Iceland",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},IN:{country:"India",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},ID:{country:"Indonesia",shortBandBegin:1,shortBandEnd:13,longBand:[149,153,157,161]},IR:{country:"Iran",shortBandBegin:1,shortBandEnd:13,longBand:[149,153,157,161,165]},IE:{country:"Ireland",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},IL:{country:"Israel",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},IT:{country:"Italy",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},JP:{country:"Japan",shortBandBegin:1,shortBandEnd:14,longBand:[36,40,44,48]},JO:{country:"Jordan",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},KZ:{country:"Kazakhstan",shortBandBegin:1,shortBandEnd:13,longBand:[]},KP:{country:"Korea North",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161]},KR:{country:"Korea Republic",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161]},KW:{country:"Kuwait",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},LV:{country:"Latvia",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},LB:{country:"Lebanon",shortBandBegin:1,shortBandEnd:13,longBand:[149,153,157,161,165]},LI:{country:"Liechtenstein",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},LT:{country:"Lithuania",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},LU:{country:"Luxembourg",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},MO:{country:"Macau",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},MK:{country:"Macedonia",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},MY:{country:"Malaysia",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},MT:{country:"Malta",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},MX:{country:"Mexico",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},MC:{country:"Monaco",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},MA:{country:"Morocco",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},NL:{country:"Netherlands",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},NZ:{country:"New Zealand",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},NO:{country:"Norway",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},OM:{country:"Oman",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},PA:{country:"Panama",shortBandBegin:1,shortBandEnd:11,longBand:[36,40,44,48,149,153,157,161,165]},PK:{country:"Pakistan",shortBandBegin:1,shortBandEnd:13,longBand:[149,153,157,161,165]},PE:{country:"Peru",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},PH:{country:"Philippines",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},PL:{country:"Poland",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},PT:{country:"Portugal",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},PR:{country:"Puerto Rico",shortBandBegin:1,shortBandEnd:11,longBand:[36,40,44,48,149,153,157,161,165]},QA:{country:"Qatar",shortBandBegin:1,shortBandEnd:13,longBand:[149,153,157,161,165]},RO:{country:"Romania",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},RU:{country:"Russia",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},SA:{country:"Saudi Arabia",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},SG:{country:"Singapore",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},SK:{country:"Slovakia",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},SI:{country:"Slovenia",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},ZA:{country:"South Africa",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},ES:{country:"Spain",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},SE:{country:"Sweden",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},CH:{country:"Switzerland",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},SY:{country:"Syria",shortBandBegin:1,shortBandEnd:13,longBand:[]},TW:{country:"Taiwan",shortBandBegin:1,shortBandEnd:11,longBand:[149,153,157,161]},TH:{country:"Thailand",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},TT:{country:"Trinidad & Tobago",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},TN:{country:"Tunisia",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},TR:{country:"Turkey",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},UA:{country:"Ukraine",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},AE:{country:"United Arab Emirates",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},GB:{country:"United Kingdom",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},UZ:{country:"Uzbekistan",shortBandBegin:1,shortBandEnd:11,longBand:[36,40,44,48,149,153,157,161,165]},UY:{country:"Uruguay",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},US:{country:"United States",shortBandBegin:1,shortBandEnd:11,longBand:[36,40,44,48,149,153,157,161,165]},VE:{country:"Venezuela",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},VN:{country:"Vietnam",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},YE:{country:"Yemen",shortBandBegin:1,shortBandEnd:13,longBand:[]},ZW:{country:"Zimbabwe",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]}},new_region={AL:{country:"Albania",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},DZ:{country:"Algeria",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},AR:{country:"Argentina",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},AM:{country:"Armenia",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},AU:{country:"Australia",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},AT:{country:"Austria",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},AZ:{country:"Azerbaijan",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},BH:{country:"Bahrain",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},BY:{country:"Belarus",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},BE:{country:"Belgium",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},BZ:{country:"Belize",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},BO:{country:"Bolivia",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},BR:{country:"Brazil",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},BN:{country:"Brunei Darussalam",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},BG:{country:"Bulgaria",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},CA:{country:"Canada",shortBandBegin:1,shortBandEnd:11,longBand:[36,40,44,48,149,153,157,161,165]},CL:{country:"Chile",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},CN:{country:"China",shortBandBegin:1,shortBandEnd:13,longBand:[149,153,157,161,165]},CO:{country:"Colombia",shortBandBegin:1,shortBandEnd:11,longBand:[36,40,44,48,149,153,157,161,165]},CR:{country:"Costa Rica",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},HR:{country:"Croatia",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},CY:{country:"Cyprus",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},CZ:{country:"Czech Republic",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},DK:{country:"Denmark",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},DO:{country:"Dominican Republic",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},EC:{country:"Ecuador",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},EG:{country:"Egypt",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},SV:{country:"El Salvador",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},EE:{country:"Estonia",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},FI:{country:"Finland",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},FR:{country:"France",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},GE:{country:"Georgia",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},DE:{country:"Germany",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},GR:{country:"Greece",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},GT:{country:"Guatemala",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},HN:{country:"Honduras",shortBandBegin:1,shortBandEnd:13,longBand:[149,153,157,161,165]},HK:{country:"Hong Kong",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},HU:{country:"Hungary",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},IS:{country:"Iceland",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},IN:{country:"India",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},ID:{country:"Indonesia",shortBandBegin:1,shortBandEnd:13,longBand:[149,153,157,161]},IR:{country:"Iran",shortBandBegin:1,shortBandEnd:13,longBand:[149,153,157,161,165]},IE:{country:"Ireland",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},IL:{country:"Israel",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},IT:{country:"Italy",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},JP:{country:"Japan",shortBandBegin:1,shortBandEnd:14,longBand:[36,40,44,48]},JO:{country:"Jordan",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},KZ:{country:"Kazakhstan",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},KP:{country:"Korea North",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161]},KR:{country:"Korea Republic",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161]},KW:{country:"Kuwait",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},LV:{country:"Latvia",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},LB:{country:"Lebanon",shortBandBegin:1,shortBandEnd:13,longBand:[149,153,157,161,165]},LI:{country:"Liechtenstein",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},LT:{country:"Lithuania",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},LU:{country:"Luxembourg",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},MO:{country:"Macau",shortBandBegin:1,shortBandEnd:13,longBand:[149,153,157,161,165]},MK:{country:"Macedonia",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},MY:{country:"Malaysia",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},MT:{country:"Malta",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},MX:{country:"Mexico",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},MC:{country:"Monaco",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},MA:{country:"Morocco",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},NL:{country:"Netherlands",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},NZ:{country:"New Zealand",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},NO:{country:"Norway",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},OM:{country:"Oman",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},PK:{country:"Pakistan",shortBandBegin:1,shortBandEnd:13,longBand:[149,153,157,161,165]},PA:{country:"Panama",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},PE:{country:"Peru",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},PH:{country:"Philippines",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},PL:{country:"Poland",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},PT:{country:"Portugal",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},PR:{country:"Puerto Rico",shortBandBegin:1,shortBandEnd:11,longBand:[36,40,44,48,149,153,157,161,165]},QA:{country:"Qatar",shortBandBegin:1,shortBandEnd:13,longBand:[149,153,157,161,165]},RO:{country:"Romania",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},RU:{country:"Russia",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},SA:{country:"Saudi Arabia",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161]},SG:{country:"Singapore",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},SK:{country:"Slovakia",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},SI:{country:"Slovenia",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},ZA:{country:"South Africa",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},ES:{country:"Spain",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},SE:{country:"Sweden",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},CH:{country:"Switzerland",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},SY:{country:"Syria",shortBandBegin:1,shortBandEnd:13,longBand:[]},TW:{country:"Taiwan",shortBandBegin:1,shortBandEnd:11,longBand:[149,153,157,161,165]},TH:{country:"Thailand",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},TT:{country:"Trinidad & Tobago",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},TN:{country:"Tunisia",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},TR:{country:"Turkey",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},UA:{country:"Ukraine",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},AE:{country:"United Arab Emirates",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},GB:{country:"United Kingdom",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},US:{country:"United States",shortBandBegin:1,shortBandEnd:11,longBand:[36,40,44,48,149,153,157,161,165]},UY:{country:"Uruguay",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},UZ:{country:"Uzbekistan",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},VE:{country:"Venezuela",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},VN:{country:"Vietnam",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48]},YE:{country:"Yemen",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]},ZW:{country:"Zimbabwe",shortBandBegin:1,shortBandEnd:13,longBand:[36,40,44,48,149,153,157,161,165]}};
!function(a){function b(){a.i18n.elementLocalization("#aboutContent",["span"])}function c(b){a("#deviceName").text(b.deviceInfo.model),a("#swVersion").text(b.deviceInfo.firmwareVer),a("#hwVersion").text(b.deviceInfo.hardwareVer),a("#IMEI").text(b.deviceInfo.imei),a("#MACAddress").text(b.deviceInfo.mac),a("#imsi").text(b.deviceInfo.imsi),a("#simNumber").text(b.deviceInfo.simNumber),b.deviceInfo.imsi?a("#imsi").parent().show():a("#imsi").parent().hide(),b.deviceInfo.simNumber?a("#simNumber").parent().show():a("#simNumber").parent().hide()}function d(){getConfigJSON(e,c)}var e="status";a.about={onLoad:function(){b(),d()},onEnter:function(){a("#pageFooter").hide()},onLeave:function(){a("#pageFooter").show()}}}(jQuery),function(a){function b(){phonePage.setContentPage("networkMode")}function c(){phonePage.setContentPage("pinManagement")}function d(){phonePage.setContentPage("onlineClients")}function e(){phonePage.setContentPage("blackList")}function f(){phonePage.setContentPage("storageSharing")}function g(){phonePage.setContentPage("wps")}function h(){phonePage.setContentPage("timeSettings")}function i(){phonePage.setContentPage("firmwareUpdate")}function j(){a("#pNetworkModeBtn").click(b),a("#pPinManagementBtn").click(c),a("#pOnlineClientsBtn").click(d),a("#pBlackListBtn").click(e),a("#pStorageSharingBtn").click(f),a("#pWpsBtn").click(g),a("#pTimeSettingsBtn").click(h),a("#pFirmwareUpdateBtn").click(i)}a.advanced={onLoad:function(){j()},onEnter:function(){a("#pageFooter").hide()},onLeave:function(){a("#pageFooter").show()}}}(jQuery),function(a){function b(){getConfigJSON(j,c)}function c(b){if(b.denyList){var c;for(i=b.denyList,l=i.length,a("#pBlackDevicesEmpty").hide(),a("#blockDeviceList").html(""),c=0;c<i.length;c++)a("#blockDeviceList").append(e(i[c]));m=!1,a("#pBlockDevicesLoad").hide(),a(".black-item").each(function(b,c){a(c).unbind().bind("click",d)}),a("#blockDeviceList").show()}else a("#blockDeviceList").hide(),a("#pBlockDevicesLoad").hide(),a("#pBlackDevicesEmpty").show()}function d(){var b=this;m&&(a(b).hasClass("checked")?(a(b.firstChild.firstChild).attr("src","images/phone/unchecked.png"),a(b).removeClass("checked"),k===l&&a("#pDeviceCheckAll").text(a.i18n.prop("pDeviceCheckText")),k--):(a(b.firstChild.firstChild).attr("src","images/phone/checked.png"),a(b).addClass("checked"),k++,k===l&&a("#pDeviceCheckAll").text(a.i18n.prop("pDeviceUnCheckText"))))}function e(a){return'<div class="black-item devices-content"><div class="item-action black-action hide"><img src="images/phone/unchecked.png"></div><div class="content-header"><img src="images/phone/client.png" class="content-icon"/><span class="content-title blackDesciption">'+a.description+'</span><div class="black-item-patch">'+a.mac+"</div></div></div>"}function f(){return'<div id="pBlockListHeader"><a id="pDeviceCheckAll" class="page-header-btn text-left hide"><span id="pDeviceCheckText"></span></a><a id="pDeviceRefresh" class="page-header-btn icon-right"><img class="operateBtn" src="images/phone/refresh.png"/></a><a id="pDeviceResumeOpen" class="page-header-btn icon-right"><img class="operateBtn" style="top:-3px;" src="images/phone/resume.png"/></a><a id="pDeviceResume" class="page-header-btn text-right hide"><span id="pResumeText">'+a.i18n.prop("pResumeText")+'</span></a><a id="pDeviceResumeCancel" class="page-header-btn text-right hide"><span id="pResumeCancelText">'+a.i18n.prop("pResumeCancelText")+"</span></a></div>"}function g(){var c,d={},e=[],f={};c=i.length-k,k===l?d.denyList=[]:a(".black-item").each(function(b,c){return a(c).hasClass("checked")?!0:(f={},f.mac=a(c.lastChild).find(".black-item-patch").text().replace(/:/g,"-"),f.description=a(c.lastChild).find(".blackDesciption").text(),e.push(f),a(c.firstChild).addClass("hide"),a(c.lastChild).css("width","100%"),void 0)}),d.mode=1,d.enable=!0,d.denyList=e,callJSON(j,1,d,function(c){0===c.result?(a("#pDeviceResumeCancel").click(),a("#pBlockDevicesLoad").show(),b(),phonePage.showToast(a.i18n.prop("successfullTip"),"images/phone/saved.png")):phonePage.showToast(a.i18n.prop("resumeFailedTip"),"images/phone/saveFail.png")})}function h(){a("#pDeviceRefresh").unbind().click(function(){a("#pBlockDevicesLoad").show(),b()}),a("#pDeviceResumeOpen").on("click",function(){""!==a("#blockDeviceList").html()&&(m=!0,a("#pDeviceCheckAll").text(a.i18n.prop("pDeviceCheckText")),k=0,a("#backBtn").css("display","none"),a("#pDeviceResumeOpen").hide(),a("#pDeviceRefresh").hide(),a("#pageHeaderTitle").hide(),a("#pDeviceCheckAll").show(),a("#pDeviceResumeCancel").show(),a("#pDeviceResume").show(),a(".black-item").each(function(b,c){a(c.firstChild).show(),a(c.lastChild).css("width","86%")}),a(".black-item-patch").css("margin","-12px 75px 0"),a(".blackDesciption").css("width","65%"))}),a("#pDeviceCheckAll").unbind().click(function(){k!==l?(a(".black-action").each(function(b,c){a(c).parent().addClass("checked"),a(c.firstChild).attr("src","images/phone/checked.png")}),a("#pDeviceCheckAll").text(a.i18n.prop("pDeviceUnCheckText")),k=l):(a(".black-action").each(function(b,c){a(c).parent().removeClass("checked"),a(c.firstChild).attr("src","images/phone/unchecked.png")}),a("#pDeviceCheckAll").text(a.i18n.prop("pDeviceCheckText")),k=0)}),a("#confirmOK").text(a.i18n.prop("pResumeText")),a("#confirmText").text(a.i18n.prop("resumeComfirmText")),a("#pDeviceResume").on("click",function(){return 0===k?(phonePage.showToast(a.i18n.prop("resumeNoneTip"),"images/phone/warning.png"),void 0):(a("#confirmPopup").popup("show"),void 0)}),a("#confirmOK").unbind().click(function(){a("#confirmPopup").popup("hide"),g()}),a("#pDeviceResumeCancel").on("click",function(){k=0,m=!1,a("#backBtn").css("display","block"),a("#pDeviceCheckAll").hide(),a("#pDeviceResumeCancel").hide(),a("#pDeviceResume").hide(),a("#pDeviceResumeOpen").show(),a("#pDeviceRefresh").show(),a("#pageHeaderTitle").show(),a(".black-item").each(function(b,c){a(c.firstChild.firstChild).attr("src","images/phone/unchecked.png"),a(c.firstChild).hide(),a(c.lastChild).css("width","100%"),a(c).removeClass("checked")}),a("#pDeviceCheckAll").text(a.i18n.prop("pDeviceCheckText")),a(".black-item-patch").css("margin","-12px 38px 0"),a(".blackDesciption").css("width","80%")})}var i=null,j="macFilters",k=0,l=0,m=!1;a.blackList={onEnter:function(){a("#pageFooter").hide(),a("#pageHeader").append(f()),a("#pBlockDevicesLoad").show(),a("#blockDeviceList").html(""),b(),h()},onLeave:function(){a("#pBlockListHeader")[0]&&a("#pBlockListHeader").detach(),i=null,a("#pageFooter").show()}}}(jQuery),function(a){function b(){a("#paymentDateSwitch").switchButton({onChanged:function(b){b?(a("#paymentDateInput").parent().parent().parent().show(),a("#totalDataLbl").text(a.i18n.prop("dataCorrectionLbl")),a("#totalQuotaLbl").text(a.i18n.prop("monthQuotaLbl"))):(a("#paymentDateInput").parent().parent().parent().hide(),a("#totalDataLbl").text(a.i18n.prop("totalUsedLbl")),a("#totalQuotaLbl").text(a.i18n.prop("totalQuotaLbl")))}}),a("#dataLimitSwitch").switchButton({onChanged:function(b){b?(a("#dataPlanInput").parent().parent().parent().parent().show(),a("#dataPlanInput").val()||a("#dataPlanInput").focus()):a("#dataPlanInput").parent().parent().parent().parent().hide()}}),a("#dataCorrectBtn").click(function(){a("#dataCorrectBtn").text()===a.i18n.prop("dataCorrectBtn")?(a("#dataUsageInput").attr("disabled",!1),a("#dataUsageInput").parent().removeClass("disabled"),a("#dataUsageUnit").attr("disabled",!1),a("#dataUsageUnit").parent().removeClass("disable"),a("#dataCorrectBtn").text(a.i18n.prop("dataCancelBtn"))):(a("#dataUsageInput").val(k),a("#dataUsageInput").attr("disabled",!0),a("#dataUsageInput").parent().addClass("disabled"),a("#dataUsageUnit").get(0).selectedIndex=l,a("#dataUsageUnit").change(),a("#dataUsageUnit").attr("disabled",!0),a("#dataUsageUnit").parent().addClass("disable"),a("#dataUsageInput").parent().removeClass("alert"),a("#dataUsageInputErr").text("").hide(),a("#dataCorrectBtn").text(a.i18n.prop("dataCorrectBtn")))}),a("#dataUsageUnit").change(function(){a("#dataUsageUnit").parent().find(".dropdown-toggle").text(a("#dataUsageUnit").find("option:selected").text())}),a("#dataPlanUnit").change(function(){a("#dataPlanUnit").parent().find(".dropdown-toggle").text(a("#dataPlanUnit").find("option:selected").text())}),a("#dataUsageInput").blur(function(){var b=a("#dataUsageInput").val();a("#dataUsageInput").attr("disabled")||is_number(a("#dataUsageInput").val(),0,999999)?5===b.length&&b.indexOf(".")>0&&b.indexOf(".")<2||6===b.length&&b.indexOf(".")>0&&b.indexOf(".")<3?(m=!1,a(this).parent().addClass("alert"),a("#dataUsageInputErr").text(a.i18n.prop("badDecimalsErr")).show()):(a(this).parent().removeClass("alert"),a("#dataUsageInputErr").text("").hide()):(m=!1,a(this).parent().addClass("alert"),a("#dataUsageInputErr").text(a.i18n.prop("badCorrectDataErr")).show())}),a("#paymentDateInput").blur(function(){a("#paymentDateInput").is(":visible")&&!is_integer(a("#paymentDateInput").val(),1,31)?(m=!1,a(this).parent().addClass("alert"),a("#paymentDateInputErr").text(a.i18n.prop("badPaymentDateErr")).show()):(a(this).parent().removeClass("alert"),a("#paymentDateInputErr").text("").hide())}),a("#dataPlanInput").blur(function(){var b=a("#dataPlanInput").val();a("#dataPlanInput").is(":visible")&&!is_number(a("#dataPlanInput").val(),1,999999)?(m=!1,a(this).parent().addClass("alert"),a("#dataPlanInputErr").text(a.i18n.prop("badmonthQuotaErr")).show()):5===b.length&&b.indexOf(".")>0&&b.indexOf(".")<2||6===b.length&&b.indexOf(".")>0&&b.indexOf(".")<3?(m=!1,a(this).parent().addClass("alert"),a("#dataPlanInputErr").text(a.i18n.prop("badDecimalsErr")).show()):(a(this).parent().removeClass("alert"),a("#dataPlanInputErr").text("").hide())})}function c(){return m=!0,a("#dataUsageInput").attr("disabled")||a("#dataUsageInput").blur(),a("#paymentDateInput").is(":visible")&&a("#paymentDateInput").blur(),a("#dataPlanInput").is(":visible")&&a("#dataPlanInput").blur(),m}function d(){a("#confirmBtn").unbind().click(function(){var b={},d={},f=1;c()&&(d.enableDataLimit=a("#dataLimitSwitch").switchButton("checked"),d.enablePaymentDay=a("#paymentDateSwitch").switchButton("checked"),d.warningPercent=h,d.paymentDay=Number(a("#paymentDateInput").val()),d.limitation=a("#dataPlanUnit").get(0).selectedIndex===j.MB?""+Number(1024*a("#dataPlanInput").val()*1024):""+Number(1024*a("#dataPlanInput").val()*1024*1024),a("#dataUsageInput").attr("disabled")||(d.adjustStatistics=a("#dataUsageUnit").get(0).selectedIndex===j.MB?""+Number(1024*a("#dataUsageInput").val()*1024):""+Number(1024*a("#dataUsageInput").val()*1024*1024)),b.settings=d,callJSON(i,f,b,function(b){0===b.result?(a("#dataUsageInput").attr("disabled",!0),a("#dataUsageInput").parent().addClass("disabled"),a("#dataUsageUnit").attr("disabled",!0),a("#dataUsageUnit").parent().addClass("disable"),a("#dataCorrectBtn").text(a.i18n.prop("dataCorrectBtn")),getConfigJSON(i,e),phonePage.showToast(a.i18n.prop("pSaveText"),"images/phone/saved.png")):1===b.result&&phonePage.showToast(a.i18n.prop("failedText"),"images/phone/saveFail.png")}))}),getConfigJSON(i,e)}function e(b){var c=Number(b.settings.adjustStatistics),d=Number(b.settings.limitation);c>=1073741824?(k=g(c),a("#dataUsageUnit").get(0).selectedIndex=j.GB,l=1):(k=f(c),a("#dataUsageUnit").get(0).selectedIndex=j.MB,l=0),a("#dataUsageUnit").change(),a("#dataUsageInput").val(k),a("#paymentDateInput").val(b.settings.paymentDay),d>=1073741824?(d=g(d),a("#dataPlanUnit").get(0).selectedIndex=j.GB):(d=f(d),a("#dataPlanUnit").get(0).selectedIndex=j.MB),a("#dataPlanUnit").change(),d&&a("#dataPlanInput").val(d),h=b.settings.warningPercent,a("#paymentDateSwitch").switchButton("changeState",b.settings.enablePaymentDay,!0),a("#paymentDateSwitch").switchButton("change"),a("#dataLimitSwitch").switchButton("changeState",b.settings.enableDataLimit,!0),a("#dataLimitSwitch").switchButton("change")}function f(a){if(a=Number(a),0>=a)return 0;for(var b=0;2>b;b++)a/=1024;a=a.toString();var c=a.indexOf(".");return-1!==c&&(a=a.substr(0,a.indexOf(".")+3)),Number(a)}function g(a){if(a=Number(a),0>=a)return 0;for(var b=0;3>b;b++)a/=1024;a=a.toString();var c=a.indexOf(".");return-1!==c&&(a=a.substr(0,a.indexOf(".")+3)),Number(a)}var h,i="flowstat",j={MB:0,GB:1},k=0,l=0,m=!0;a.dataSettings={onLoad:function(){b()},onEnter:function(){a("#pageFooter").hide(),d()},onLeave:function(){a(".alert").removeClass("alert"),a(".errTip").hide(),a("#dataUsageInput").attr("disabled",!0),a("#dataUsageInput").parent().addClass("disabled"),a("#dataUsageUnit").get(0).selectedIndex=l,a("#dataUsageUnit").change(),a("#dataUsageUnit").attr("disabled",!0),a("#dataUsageUnit").parent().addClass("disable"),a("#dataCorrectBtn").text(a.i18n.prop("dataCorrectBtn")),a("#pageFooter").show()}}}(jQuery),function(a){function b(){phonePage.endHeartbeat(),AuthModel.logout(function(){phonePage.loadLogin()})}function c(){callJSON("restoreDefaults",0,null,null),phonePage.beginProcess(REBOOT_TIME,b)}function d(){phonePage.setContentPage("dataSettings")}function e(){phonePage.setContentPage("modifyPasswd")}function f(){phonePage.setContentPage("shutdown")}function g(){window.location.href="settings.html"}function h(){phonePage.setContentPage("about")}function i(){phonePage.setContentPage("advanced")}function j(){phonePage.setContentPage("powerSaving")}function k(){a("#pShutdownBtn").click(f),a("#pShiftBtn").click(g),a("#pRestoreFactoryBtn").click(function(){a("#confirmOK").text(a.i18n.prop("restoreOK")),a("#confirmText").text(a.i18n.prop("restoreconfirmText")),a("#confirmPopup").popup("show")}),a("#pDataSettingsBtn").click(d),a("#pModifyPswBtn").click(e),a("#pLogoutBtn").click(b),a("#pAboutBtn").click(h),a("#pAdvBtn").click(i),a("#pPowerSavingBtn").click(j)}a.device={onLoad:function(){k()},onEnter:function(){a("#confirmOK").unbind().click(function(){a("#confirmPopup").popup("hide"),a(this).text()===a.i18n.prop("restoreOK")&&c()})}}}(jQuery),dialupData={},function(a){function b(){a("#roamSwitch").switchButton(),a("#mobileDataSwitch").switchButton(),a("#pProfileCreateBtn").click(function(){return a("#profileListSel").find("option").length-n.defaultProfile===8?(a("#profileCreateErr").text(a.i18n.prop("fullProfileErr")).show(),void 0):(a("#dialup").hide(),h(),a("#pageFooter").hide(),phonePage.setContentPage("dialup"),a("#backBtn").show(),a("#dialupConfig").show(),q=!0,void 0)}),a("#pDialupCheckProfile").click(function(){dialupData=a.extend(!0,{},w),dialupData.profileSettings.list=[w.profileSettings.list[a("#profileListSel").val()]],phonePage.setContentPage("dialupProfileDetail")}),a("#apnTypeSelect").change(function(){a("#apnTypeSelect").val()===u.dynamic?a("#apnNameInput").parent().parent().parent().hide():a("#apnNameInput").parent().parent().parent().show()}),a("#pConnectBtn").click(function(){var b={},d=p.connect,e={};a("#pConnectBtn").text()===a.i18n.prop("pDisconnectBtn")&&(d=p.disconnect),a("#roamSwitch").switchButton("checked")!==m&&(b.roamingEnabled=a("#roamSwitch").switchButton("checked")),b.connectMode=Number(a("#dialUpSelect").val()),Number(a("#profileListSel").val())!==n.activeProfile&&(e.list=[],e.list[0]=n.list[Number(a("#profileListSel").val())],e.activeProfile=Number(a("#profileListSel").val()),e.defaultProfile=n.defaultProfile,b.profileSettings=e);for(var f in x)clearTimeout(x[f]);a("#pConnectBtn").text(a.i18n.prop("disconnBtn")),a("#connectImg").show(),callJSON(o,d,b,function(a){0===a.result&&(getConfigJSON(o,j),window.setTimeout(c,2e3))})}),a("#profileNameInput").blur(function(){var b=!1;switch(e(a("#profileNameInput"))){case-1:y=!1,a(this).parent().addClass("alert"),a("#profileNameInputErr").text(a.i18n.prop("emptyError")).show();break;case-2:y=!1,a(this).parent().addClass("alert"),a("#profileNameInputErr").text(a.i18n.prop("profileError")).show();break;case-3:y=!1,a(this).parent().addClass("alert"),a("#profileNameInputErr").text(a.i18n.prop("sameNameError")).show();break;case-4:y=!1,a(this).parent().addClass("alert"),a("#profileNameInputErr").text(a.i18n.prop("endError")).show();break;default:b=!0}for(i=0;i<a("#profileListSel option").length;i++)a("#profileNameInput").val()===a("#profileListSel ").get(0).options[i].text&&(b=!1,y=!1,a(this).parent().addClass("alert"),a("#profileNameInputErr").text(a.i18n.prop("sameNameError")).show());b&&(a(this).parent().removeClass("alert"),a("#profileNameInputErr").text("").hide())}),a("#apnNameInput").blur(function(){var b=!0;f(a("#apnNameInput"))||(b=!1,y=!1,a(this).parent().addClass("alert"),a("#apnNameInputErr").text(a.i18n.prop("profileError")).show()),a("#apnTypeSelect").val()===u.staticApn&&""===a("#apnNameInput").val()&&(b=!1,y=!1,a(this).parent().addClass("alert"),a("#apnNameInputErr").text(a.i18n.prop("noneApnError")).show()),b&&(a(this).parent().removeClass("alert"),a("#apnNameInputErr").text("").hide())}),a("#dialUsernameInput").blur(function(){f(a("#dialUsernameInput"))?(a(this).parent().removeClass("alert"),a("#dialUsernameInputErr").text("").hide()):(y=!1,a(this).parent().addClass("alert"),a("#dialUsernameInputErr").text(a.i18n.prop("profileError")).show())}),a("#dialPswInput").blur(function(){f(a("#dialPswInput"))?(a(this).parent().removeClass("alert"),a("#dialPswInputErr").text("").hide()):(y=!1,a(this).parent().addClass("alert"),a("#dialPswInputErr").text(a.i18n.prop("profileError")).show())}),a("#dialUpSelect").change(function(){a("#dialUpSelect").parent().find(".dropdown-toggle").text(a("#dialUpSelect").find("option:selected").text()),a("#dialUpSelect").val()===r.manual?a("#pConnectBtn").show():a("#dialUpSelect").val()===r.auto&&a("#pConnectBtn").hide()}),a("#profileListSel").change(function(){a("#profileListSel").parent().find(".dropdown-toggle").text(a("#profileListSel").find("option:selected").text())}),a("#pdpTypeSelect").change(function(){a("#pdpTypeSelect").parent().find(".dropdown-toggle").text(a("#pdpTypeSelect").find("option:selected").text())}),a("#apnTypeSelect").change(function(){a("#apnTypeSelect").parent().find(".dropdown-toggle").text(a("#apnTypeSelect").find("option:selected").text())}),a("#authTypeSelect").change(function(){a("#authTypeSelect").parent().find(".dropdown-toggle").text(a("#authTypeSelect").find("option:selected").text())})}function c(){callJSON(o,p.get_connect_status,null,function(b){0===b.result&&(b.connectStatus===Number(s.connected)&&a("#connectImg").is(":visible")&&(a("#connectImg").hide(),phonePage.showToast(a.i18n.prop("connectedStatus"),"images/phone/saved.png")),d(b))})}function d(b){b.connectStatus===Number(s.disconnected)?(a("#pConnectBtn").text(a.i18n.prop("connectBtn")),a("#connectImg").hide(),x.timer1=window.setTimeout(c,1e4)):b.connectStatus===Number(s.connected)?(a("#pConnectBtn").text(a.i18n.prop("disconnBtn")),a("#connectImg").is(":visible")&&a("#connectImg").hide(),x.timer2=window.setTimeout(c,1e4)):b.connectStatus===Number(s.connecting)?(a("#pConnectBtn").text(a.i18n.prop("disconnBtn")),a("#dialUpSelect").val()===r.manual&&a("#connectImg").show(),x.timer3=window.setTimeout(c,5e3)):(a("#pConnectBtn").text(a.i18n.prop("disconnBtn")),a("#dialUpSelect").val()===r.manual&&a("#connectImg").show(),x.timer4=window.setTimeout(c,5e3))}function e(b){var c,d,e=0,f="0123456789ABCDEFabcdefGHIJKLMNOPQRSTUVWXYZghijklmnopqrstuvwxyz`~!@#$%^&*()-=_+[]{}<>;:\\|/?.,/";if(""===b.val())return-1;for(d=0;32>d;d++)if(c=b.val().charAt(d),-1===f.indexOf(c))return-2;if(b.val().match(/\(D\)$/))return-4;for(d=0;d<a("#profileListSel option").length;d++)b.val()===a("#profileListSel ").get(0).options[d].text&&e++;return e>1?-3:1}function f(a){if(a.attr("disabled"))return!0;var b,c="0123456789ABCDEFabcdefGHIJKLMNOPQRSTUVWXYZghijklmnopqrstuvwxyz`~!@#$%^&*()-=_+[]{}<>;:\\|/?.,/";if(!a.is(":visible"))return!0;for(var d=0;31>d;d++)if(b=a.val().charAt(d),-1===c.indexOf(b))return!1;return!0}function g(){a("#backBtn").hide(),a("#backBtn").click(function(){q&&(h(),a("#dialupConfig").hide(),a("#backBtn").hide(),a("#dialup").show(),q=!1,a("#pageFooter").show(),phonePage.setContentPage("dialup"))}),a("#confirmBtn").unbind().click(function(){if(q){if(y=!0,a("#profileNameInput").blur(),a("#apnTypeSelect").val()===u.staticApn&&a("#apnNameInput").blur(),a("#dialUsernameInput").blur(),a("#dialPswInput").blur(),!y)return!1;a("#confirmOK").text(a.i18n.prop("useOKBtn")),a("#confirmText").text(a.i18n.prop("useNewProfileConfirmText")),a("#confirmPopup").popup("show")}else{var b={},c={};a("#mobileDataSwitch").switchButton("checked")!==l&&(b.dataSwitchStatus=a("#mobileDataSwitch").switchButton("checked")),a("#roamSwitch").switchButton("checked")!==m&&(b.roamingEnabled=a("#roamSwitch").switchButton("checked")),Number(a("#profileListSel").val())!==n.activeProfile&&(c.list=[],c.list[0]=n.list[Number(a("#profileListSel").val())],c.activeProfile=Number(a("#profileListSel").val()),c.defaultProfile=n.defaultProfile,b.profileSettings=c),callJSON(o,p.set_Config,b,function(b){0===b.result?(phonePage.showToast(a.i18n.prop("pSaveText"),"images/phone/saved.png"),phonePage.setContentPage("dialup")):1===b.result&&phonePage.showToast(a.i18n.prop("failedText"),"images/phone/saveFail.png")})}}),a("#confirmOK").unbind().click(function(){var b={},c={},d={};a("#confirmPopup").popup("hide"),a("#pdpTypeSelect").val()===t.ipv4||a("#pdpTypeSelect").val()===t.ipv4_ipv6?b={profileID:a("#profileListSel option").length,profileName:a("#profileNameInput").val(),pdpType:Number(a("#pdpTypeSelect").val()),ipv4Apn:a("#apnNameInput").val(),ipv4ApnType:Number(a("#apnTypeSelect").val()),ipv4Username:a("#dialUsernameInput").val(),ipv4Password:a("#dialPswInput").val(),ipv4AuthType:Number(a("#authTypeSelect").val()),ipv6Apn:"",ipv6ApnType:0,ipv6Username:"",ipv6Password:"",ipv6AuthType:2}:a("#pdpTypeSelect").val()===t.ipv6&&(b={profileID:a("#profileListSel option").length,profileName:a("#profileNameInput").val(),pdpType:Number(a("#pdpTypeSelect").val()),ipv4Apn:"",ipv4ApnType:0,ipv4Username:"",ipv4Password:"",ipv4AuthType:2,ipv6Apn:a("#apnNameInput").val(),ipv6ApnType:Number(a("#apnTypeSelect").val()),ipv6Username:a("#dialUsernameInput").val(),ipv6Password:a("#dialPswInput").val(),ipv6AuthType:Number(a("#authTypeSelect").val())}),c.list=[],c.list[0]=b,c.activeProfile=b.profileID,d.profileSettings=c,callJSON(o,p.add_Profile,d,function(b){0===b.result?(phonePage.showToast(a.i18n.prop("pSaveText"),"images/phone/saved.png"),h(),a("#dialupConfig").hide(),a("#backBtn").hide(),a("#dialup").show(),q=!1,a("#pageFooter").show(),phonePage.setContentPage("dialup")):1===b.result&&phonePage.showToast(a.i18n.prop("failedText"),"images/phone/saveFail.png")})}),getConfigJSON(o,j)}function h(){a("#profileNameInput").val(""),a("#pdpTypeSelect").get(0).selectedIndex=0,a("#apnTypeSelect").get(0).selectedIndex=0,a("#apnNameInput").val(""),a("#apnNameInput").parent().parent().parent().show(),a("#dialUsernameInput").val(""),a("#dialPswInput").val(""),a("#authTypeSelect").get(0).selectedIndex=2,a("#pdpTypeSelect").get(0).remove(2)}function j(b){if(b&&0===b.result){w=b,l=b.dataSwitchStatus,n=b.profileSettings,m=b.roamingEnabled,a("#mobileDataSwitch").switchButton("changeState",b.dataSwitchStatus,!0),dualIPVersionSupport&&a("#pdpTypeSelect").append(a("<option></option>").val("2").text(a.i18n.prop("pIpv4AndIpv6SelectOpt"))),b.dataSwitchStatus?b.connectStatus===Number(s.disconnected)?k():b.connectStatus===Number(s.disconnecting)?window.setTimeout(k,2e3):a("#disconnectedReason").text(""):a("#disconnectedReason").text(""),a("#roamSwitch").switchButton("changeState",b.roamingEnabled,!0),a("#profileListSel").empty();for(var c=0;c<b.profileSettings.list.length;c++)a("#profileListSel").append(a("<option></option>").val(b.profileSettings.list[c].profileID).text(b.profileSettings.list[c].profileName));a("#profileListSel").get(0).selectedIndex=b.profileSettings.activeProfile,a("#profileListSel").change(),a("#pdpTypeSelect").change(),a("#apnTypeSelect").change(),a("#authTypeSelect").change()}}function k(){callJSON(o,p.get_disconnet_reason,null,function(b){b.callFailReason===v.ROAM?(a("#disconnectedReason").text(a.i18n.prop("roamDisconnect")),window.setTimeout(k,1e4)):b.callFailReason===v.FLOWSTAT?a("#disconnectedReason").text(a.i18n.prop("flowstatDisconnect")):a("#disconnectedReason").text("")})}var l,m,n,o="wan",p={set_Config:1,add_Profile:2,connect:4,disconnect:5,get_connect_status:6,get_disconnet_reason:11},q=!1,r={manual:"0",auto:"1",demand:"2"},s={disable:0,disconnected:"1",connecting:"2",disconnecting:"3",connected:"4"},t={ipv4:"0",ipv6:"1",ipv4_ipv6:"2"},u={staticApn:"0",dynamic:"1"},v={NORMAL:0,ROAM:1,FLOWSTAT:2},w={},x={},y=!0;a.dialup={onLoad:function(){b()},onEnter:function(){g()},onLeave:function(){a(".alert").removeClass("alert"),a(".errTip").hide();for(var b in x)clearTimeout(x[b]);a("#pdpTypeSelect").get(0).remove(2)}}}(jQuery),function(a){"use strict";function b(){return'<div id="dialupProfileDetailHeader"><a id="pDeleteProfileBtn" class="page-header-btn right hide"><img src="images/phone/delete.png"/></a></div>'}function c(){if(dialupData&&dialupData.result!==h.FAIL){var c=a.extend(!0,{},dialupData);switch(a("#profileName2").text(c.profileSettings.list[0].profileName),c.profileSettings.list[0].pdpType){case i.IPV4:a("#pdp2").text(a.i18n.prop("pIpv4SelectOpt"));break;case i.IPV4_IPV6:a("#pdp2").text(a.i18n.prop("pIpv4AndIpv6SelectOpt"));break;case i.IPV6:a("#pdp2").text(a.i18n.prop("pIpv6SelectOpt"))}switch(c.profileSettings.list[0].pdpType){case i.IPV4:case i.IPV4_IPV6:switch(c.profileSettings.list[0].ipv4ApnType){case j.STATIC:a("#apnType2").text(a.i18n.prop("pStaticApnOpt")),a("#apnName2").text(c.profileSettings.list[0].ipv4Apn);break;case j.DYNAMIC:a("#apnType2").text(a.i18n.prop("pDynamicApnOpt")),a("#apnName2").text(a.i18n.prop("pDynamicApnOpt"))}switch(a("#dialUsername2").text(c.profileSettings.list[0].ipv4Username||a.i18n.prop("none")),a("#dialPsw2").text(c.profileSettings.list[0].ipv4Password||a.i18n.prop("none")),c.profileSettings.list[0].ipv4AuthType){case k.NONE:a("#authType2").text(a.i18n.prop("pNoneAuthOpt"));break;case k.PAP:a("#authType2").text(a.i18n.prop("pPapAuthOpt"));break;case k.CHAP:a("#authType2").text(a.i18n.prop("pChapAuthOpt"))}break;case i.IPV6:switch(c.profileSettings.list[0].ipv6ApnType){case j.STATIC:a("#apnType2").text(a.i18n.prop("pStaticApnOpt")),a("#apnName2").text(c.profileSettings.list[0].ipv6Apn);break;case j.DYNAMIC:a("#apnType2").text(a.i18n.prop("pDynamicApnOpt")),a("#apnName2").text(a.i18n.prop("pDynamicApnOpt"))}switch(a("#dialUsername2").text(c.profileSettings.list[0].ipv6Username||a.i18n.prop("none")),a("#dialPsw2").text(c.profileSettings.list[0].ipv6Password||a.i18n.prop("none")),c.profileSettings.list[0].ipv6AuthType){case k.NONE:a("#authType2").text(a.i18n.prop("pNoneAuthOpt"));break;case k.PAP:a("#authType2").text(a.i18n.prop("pPapAuthOpt"));break;case k.CHAP:a("#authType2").text(a.i18n.prop("pChapAuthOpt"))}}a("#dialupProfileDetailHeader")[0]||a("#pageHeader").append(b()),c.profileSettings.list[0].profileID<c.profileSettings.defaultProfile?a("#pDeleteProfileBtn").addClass("hide"):a("#pDeleteProfileBtn").removeClass("hide")}}function d(){a("#pDeleteProfileBtn").click(function(){a("#confirmOK").text(a.i18n.prop("pDeleteProfileBtn2")),a("#confirmText").text(a.i18n.prop("pProfileDeleteQuestion2")),a("#confirmPopup").popup("show")}),a("#confirmOK").unbind().click(function(){a("#confirmPopup").popup("hide"),e()})}function e(){var b={};b.profileSettings=a.extend(!0,{},dialupData.profileSettings);var c=!1;return b.profileSettings.list[0].profileID===b.profileSettings.activeProfile&&(b.profileSettings.activeProfile=0),callJSON(f,g.DELETE_PROFILE,b,function(b){b.result===h.SUCCESS?(phonePage.showToast(a.i18n.prop("deleteSuccessText"),"images/phone/saved.png"),phonePage.setContentPage("dialup"),c=!0):(phonePage.showToast(a.i18n.prop("deleteFailedText"),"images/phone/saveFail.png"),c=!1)}),c}var f="wan",g={GET_CONFIG:0,SET_CONFIG:1,ADD_PROFILE:2,DELETE_PROFILE:3,CONNECT:4,DISCONNECT:5,GET_CONNECT_STATUS:6,WZD_ADD_PROFILE:7,SET_NETWORK_SELECTION_MODE:8,QUARY_AVAILABLE_NETWORK:9,GET_NETWORK_SELECTION_STATUS:10,GET_DISCONNECT_REASON:11,ADD_PROFILE_NO_APPLY:12,EDIT_PROFILE_NO_APPLY:13},h={SUCCESS:0,FAIL:1},i={IPV4:0,IPV6:1,IPV4_IPV6:2},j={STATIC:0,DYNAMIC:1},k={NONE:0,PAP:1,CHAP:2,OPTIONAL:3};a.dialupProfileDetail={onLoad:function(){c()},onEnter:function(){a("#pageFooter").hide(),c(),d()},onLeave:function(){a("#dialupProfileDetailHeader")[0]&&a("#dialupProfileDetailHeader").detach(),a("#pageFooter").show()}}}(jQuery),function(a){function b(){getConfigJSON(k,c)}function c(b){a("#currentSwVer").text(b.firmwareVersion),b.hasNewVersion?(r=byte2MB(b.firmwareSize),a("#newFirmware").text(" "+b.latestVersion),a("#newFirmwareLink").attr("href",b.downloadUrl),a("#newFirmwareSize").text("("+r+"MB)"),a("#hasNewVersion").slideDown("fast"),j=b.releaseNote,l=1,a("#updateBtn").show()):l=0,a(".updateSection").show()}function d(){return'<div id="pFirmwareUpdateHeader"><a id="updateBtn" class="page-header-btn text-left right updateBtn hide"><span id="pUpdateText">'+a.i18n.prop("updateBtn")+"</span></a></div>"}function e(){1===l?a("#updateBtn").show():a("#updateBtn").hide(),a("#checkNewBtn").click(function(){a("#queryImg").show(),a("#hasNewVersion").slideUp("fast"),a("#noNewVersion").slideUp("fast"),a("#checkNewBtn").attr("disabled",!0),a("#updateBtn").hide(),window.setTimeout(i,500)}),a("#releaseNoteLink").click(function(){var b,c,d=j.split("\n");if(a("#releaseNote").is(":visible"))a("#releaseNoteLink img").attr("src","images/phone/arrow-right.png"),a("#releaseNote").hide();else{a("#releaseNoteLink img").attr("src","images/phone/arrow-down.png"),a("#releaseContent").empty();for(var e=0;e<d.length;e++)b='<div class="releaseItem"><span>'+d[e]+"</span></div>",c=a(b),c.appendTo("#releaseContent");a("#releaseNote").show()}}),a("#updatePauseBtn").click(function(){window.clearTimeout(o),a("#coverView").removeAttr("style").hide(),a("#serverUpdateProgress").hide(),a("#rxSpeedDiv").hide(),a("#updatePauseBtn").hide(),callJSON(k,s.pauseLoad,null,function(){})}),a("#errMessagePopup").popup({$closeButtons:a("#errOK")})}function f(){m&&(a("#serverProgressBar").css("width",String(m/10)+"%"),a("#updateProcessText").text(parseInt(m/10)+"%"))}function g(){return m>1e3?(window.location.reload(),void 0):(1e3>=m&&(o=window.setTimeout(g,n),f(),m++),void 0)}function h(){callJSON(k,s.reqLoadPercentage,null,function(b){switch(b.result){case v.RESULT_OK:b.percentage<100?(m=10*b.percentage,f(),byte2MB(b.downloadedSize)?a("#downloadSizeText").text(byte2MB(b.downloadedSize)+"/"+r+"MB"):a("#downloadSizeText").text(r+"MB"),a("#rxSpeed").text(speedShow(b.RXSpeed)),a("#rxSpeedDiv").show(),o=window.setTimeout(h,3e3)):(m=10*b.percentage,f(),a("#updatePauseBtn").hide(),a("#downloadSizeText").hide(),a("#rxSpeedDiv").hide(),window.clearTimeout(o),a("#loading").text(a.i18n.prop("upgrading")),callJSON(k,s.startUpgrade,null,function(b){0===b.result?(m=0,n=64,g()):(a("#coverView").removeAttr("style").hide(),a("#serverUpdateProgress").hide(),a("#rxSpeedDiv").hide(),a("#updatePauseBtn").hide(),a("#errMessage").text(a.i18n.prop("upgradeFailErr")),a("#errMessagePopup").popup("show"))}));break;case v.RESULT_RSA_FAILED:m=10*b.percentage,f(),window.setTimeout(function(){a("#coverView").removeAttr("style").hide(),a("#serverUpdateProgress").hide(),a("#rxSpeedDiv").hide(),window.clearTimeout(o),a("#errMessage").text(a.i18n.prop("RSAVerifyFailedErr")),a("#errMessagePopup").popup("show")},500);break;case v.RESULT_COM_FAILED:m=10*b.percentage,f(),window.setTimeout(function(){a("#coverView").removeAttr("style").hide(),a("#serverUpdateProgress").hide(),a("#rxSpeedDiv").hide(),window.clearTimeout(o),a("#errMessage").text(a.i18n.prop("COMVerifyFailedErr")),a("#errMessagePopup").popup("show")},500);break;default:a("#coverView").removeAttr("style").hide(),a("#serverUpdateProgress").hide(),a("#rxSpeedDiv").hide(),window.clearTimeout(o),a("#errMessage").text(a.i18n.prop("serverErr")),a("#errMessagePopup").popup("show")}})}function i(){callJSON(k,s.checkNew,null,function(b){switch(b.result){case t.RESULT_OK:1===b.hasNewVersion?(r=byte2MB(b.firmwareSize),a("#newFirmware").text(" "+b.latestVersion),a("#newFirmwareLink").attr("href",b.downloadUrl),a("#newFirmwareSize").text("("+r+"MB )"),a("#hasNewVersion").slideDown("fast"),j=b.releaseNote,l=1,a("#updateBtn").show()):(a("#noNewVersion").slideDown("fast"),l=0);
break;case t.RESULT_SERVER_ERROR:phonePage.showToast(a.i18n.prop("serverErr"),"images/phone/warning.png");break;case t.RESULT_NET_ERROR:phonePage.showToast(a.i18n.prop("networkErr"),"images/phone/warning.png");break;case t.RESULT_CHECKING:q=window.setTimeout(i,3e3)}b.result!==t.RESULT_CHECKING&&(a("#queryImg").hide(),a("#checkNewBtn").attr("disabled",!1),window.clearTimeout(q))})}var j,k="update",l=0,m=0,n=100,o=0,p=0,q=0,r=0,s={getConfig:0,checkNew:1,serverUpdate:2,pauseLoad:3,reqLoadPercentage:4,reqUploadPercentage:5,startUpgrade:6,clearCache:7},t={RESULT_OK:0,RESULT_ERROR:1,RESULT_SERVER_ERROR:2,RESULT_NET_ERROR:3,RESULT_CHECKING:4},u={RESULT_OK:0,RESULT_VERSION_NEWESR:1,RESULT_START_ERROR:2,RESULT_NET_ERROR:3},v={RESULT_OK:0,RESULT_GET_ERROR:1,RESULT_RSA_FAILED:2,RESULT_COM_FAILED:3};beginProcess=function(){var b=window.innerHeight,c=.2*b;a("#serverUpdateProgress").css({margin:c+"px 5%"}),a("#coverView").css({height:"auto","background-color":"rgba(0, 0, 0, 0.4)"}).show(),m=0,a("#serverProgressBar").css("width","0%"),a("#updateProcessText").text("0%"),a("#serverUpdateProgress").show(),h()},a.firmwareUpdate={onLoad:function(){a("#pageHeader").append(d()),e()},onEnter:function(){a("#pageFooter").hide(),a("#hasNewVersion").hide(),a("#releaseNoteLink img").attr("src","images/phone/arrow-right.png"),a("#releaseNote").hide(),a("#pFirmwareUpdateHeader")[0]||a("#pageHeader").append(d()),a("#updateBtn").click(function(){a("#confirmOK").text(a.i18n.prop("updateOKBtn")),a("#confirmText").text(a.i18n.prop("updateConfirmText")),a("#confirmPopup").popup("show")}),a("#confirmOK").unbind().click(function(){a("#confirmPopup").popup("hide"),callJSON(k,s.serverUpdate,null,function(b){switch(b.result){case u.RESULT_OK:beginProcess(),a("#updatePauseBtn").show();break;case u.RESULT_NET_ERROR:a("#errMessage").text(a.i18n.prop("networkErr")),a("#errMessagePopup").popup("show");break;case u.RESULT_VERSION_NEWESR:a("#errMessage").text(a.i18n.prop("alreadyNewestErr")),a("#errMessagePopup").popup("show");break;case u.RESULT_START_ERROR:a("#errMessage").text(a.i18n.prop("serverErr")),a("#errMessagePopup").popup("show")}})}),b()},onLeave:function(){a("#pFirmwareUpdateHeader")[0]&&a("#pFirmwareUpdateHeader").detach(),window.clearInterval(p),window.clearTimeout(q),window.clearTimeout(o)}}}(jQuery),function(a){function b(b){-1!==location.search.indexOf("timeout")?phonePage.showToast(a.i18n.prop("sessionTimeout")):-1!==location.search.indexOf("kickedOut")?phonePage.showToast(a.i18n.prop("kickedOut")):1===b.result&&"0.0.0.0"!==b.authedIP&&phonePage.showToast(a.i18n.prop("onlyOne"),void 0,3e3),a("#usernameInput").focus()}function c(b){0===b.result&&0===b.remainAttempts&&(a("#coverView").css("height","auto"),phonePage.showToast(a.i18n.prop("loginLocked"),void 0,0))}function d(b){switch(b){case AUTH_RES.success:a("#pLoginPhone").hasClass("active")?phonePage.loadContent():a("#pLoginPC").hasClass("active")&&(window.location.href="settings.html");break;case AUTH_RES.pwdWrong:phonePage.showToast(a.i18n.prop("pswWrong")),callJSON(i,2,null,c);break;case AUTH_RES.otherLogin:phonePage.showToast(a.i18n.prop("onlyOne"),void 0,3e3);break;default:phonePage.showToast(a.i18n.prop("unknownResult"))}}function e(){var b=a("#usernameInput").val(),c=a("#passwordInput").val();return b&&c?(AuthModel.login(b,c,d),void 0):(phonePage.showToast(a.i18n.prop("emptyInputErr")),void 0)}function f(){a("#usernameInput").attr("placeholder",a.i18n.prop("usernamePlaceHolder")),a("#passwordInput").attr("placeholder",a.i18n.prop("passwordPlaceHolder")),a("#pLoginBtn").click(e),a("#passwordInput").on("keyup",function(b){13===b.which&&a("#pLoginBtn").click()}),a("#pLoginPhone").click(function(){a("#pLoginPC").removeClass("active"),a("#pLoginPhone").addClass("active")}),a("#pLoginPC").click(function(){a("#pLoginPhone").removeClass("active"),a("#pLoginPC").addClass("active")}),a("#langSel").click(function(){a("#pLanguageTitle").css("color","#10C4FC")}),a("#langSel").change(function(){h!==a("#langSel").val()&&callJSON(j,k.SET_LANGUAGE,{language:a("#langSel").val()},function(a){0===a.result&&window.location.reload()})})}function g(){getConfigJSON(i,b),callJSON(i,2,null,c)}var h,i="authenticator",j="webServer",k={GET_LANGUAGE:0,SET_LANGUAGE:1};a.login={onLoad:function(){callJSON(j,k.GET_LANGUAGE,null,function(b){h=b.language,a("#langSel").val(b.language),a.i18n.setLocale(b.language)},null,null,!1),f()},onEnter:function(){a(".toast").css("margin-top","0"),phonePage.endHeartbeat(),a("#usernameInput").val(""),a("#passwordInput").val(""),g()}}}(jQuery),function(a){function b(){var b;a("#mOldLgUsr").attr("placeholder",a.i18n.prop("pOldUsername")),a("#mOldLgPsw").attr("placeholder",a.i18n.prop("pOldPassword")),a("#mNewLgUsr").attr("placeholder",a.i18n.prop("pNewUsername")),a("#mNewLgPsw").attr("placeholder",a.i18n.prop("pNewPassword")),a("#mNewLgPswConfirm").attr("placeholder",a.i18n.prop("PConfirmPassword")),a("#mNewLgPsw").keyup(function(){var b=checkPassword(a("#mNewLgPsw").val());b>=70?(a("#pswWeak").removeClass("active"),a("#pswNormal").removeClass("active"),a("#pswStrong").addClass("active")):b>=50?(a("#pswWeak").removeClass("active"),a("#pswNormal").addClass("active"),a("#pswStrong").removeClass("active")):b>0?(a("#pswWeak").addClass("active"),a("#pswNormal").removeClass("active"),a("#pswStrong").removeClass("active")):(a("#pswWeak").removeClass("active"),a("#pswNormal").removeClass("active"),a("#pswStrong").removeClass("active")),a("#mNewLgPswConfirm").val()===a("#mNewLgPsw").val()?""===a("#mNewLgPsw").val()?a("#rightIndex").hide():a("#rightIndex").show():""!==a("#mNewLgPswConfirm").val()&&a("#rightIndex").hide()}),a("#mNewLgPswConfirm").keyup(function(){a("#mNewLgPswConfirm").val()===a("#mNewLgPsw").val()?""===a("#mNewLgPsw").val()?a("#rightIndex").hide():a("#rightIndex").show():a("#rightIndex").hide()}),a("#mOldLgUsr").blur(function(){b=validUsername(a(this).val()),b?(e=!1,a(this).parent().addClass("alert"),1===b?a("#mOldLgUsrErr").text(a.i18n.prop("pEmptyErr")).show():a("#mOldLgUsrErr").text(a.i18n.prop("invalidUsernameErr")).show()):(a(this).parent().removeClass("alert"),a("#mOldLgUsrErr").text("").hide())}),a("#mOldLgPsw").blur(function(){b=validPassword(a(this).val()),b?(e=!1,a(this).parent().addClass("alert"),1===b?a("#mOldLgPswErr").text(a.i18n.prop("pEmptyErr")).show():a("#mOldLgPswErr").text(a.i18n.prop("invalidPasswordErr")).show()):(a(this).parent().removeClass("alert"),a("#mOldLgPswErr").text("").hide())}),a("#mNewLgUsr").blur(function(){a("#mNewLgPsw").keyup(),b=validUsername(a(this).val()),b?(e=!1,a(this).parent().addClass("alert"),1===b?a("#mNewLgUsrErr").text(a.i18n.prop("pEmptyErr")).show():a("#mNewLgUsrErr").text(a.i18n.prop("invalidUsernameErr")).show()):(a(this).parent().removeClass("alert"),a("#mNewLgUsrErr").text("").hide())}),a("#mNewLgPsw").blur(function(){b=validPassword(a(this).val()),b?(e=!1,a(this).parent().addClass("alert"),1===b?a("#mNewLgPswErr").text(a.i18n.prop("pEmptyErr")).show():a("#mNewLgPswErr").text(a.i18n.prop("invalidPasswordErr")).show()):(a(this).parent().removeClass("alert"),a("#mNewLgPswErr").text("").hide())}),a("#mNewLgPswConfirm").blur(function(){a("#mNewLgPswConfirm").keyup(),b=validPassword(a(this).val()),1===b?(e=!1,a(this).parent().addClass("alert"),a("#mNewLgPswConfirmErr").text(a.i18n.prop("pEmptyErr")).show()):a("#mNewLgPswConfirm").val()!==a("#mNewLgPsw").val()?(e=!1,a(this).parent().addClass("alert"),a("#mNewLgPswConfirmErr").text(a.i18n.prop("differentErr")).show()):(a(this).parent().removeClass("alert"),a("#mNewLgPswConfirmErr").text("").hide())}),a("#skip").click(function(){modifyPswRemind=!1,phonePage.setContentPage("status")}),a("#pDone").click(function(){var b="authenticator",d={},e=4;return c()?(a("#rightIndex").hide(),d.username=a("#mOldLgUsr").val(),d.newUsername=a("#mNewLgUsr").val(),d.password=a("#mOldLgPsw").val(),d.newPassword=a("#mNewLgPsw").val(),callJSON(b,e,d,function(b){return 0===b.result?(phonePage.showToast(a.i18n.prop("pSaveText"),"images/phone/saved.png"),modifyPswRemind=!1,phonePage.setContentPage("status")):1===b.result?phonePage.showToast(a.i18n.prop("authErr")):2===b.result&&phonePage.showToast(a.i18n.prop("failedText"),"images/phone/saveFail.png"),!1}),void 0):!1})}function c(){return e=!0,a("#mOldLgUsr").blur(),a("#mOldLgPsw").blur(),a("#mNewLgUsr").blur(),a("#mNewLgPsw").blur(),a("#mNewLgPswConfirm").blur(),e?!0:!1}function d(){var b=!1;modifyPswRemind?(a("#oldAccount").hide(),a("#backBtn").hide(),a("#confirmBtn").hide(),a("#skip").show(),a("#modifyDone").show(),a("#mOldLgUsr").val("admin"),a("#mOldLgPsw").val("admin"),b=!0,callJSON("webServer",3)):(a("#backBtn").show(),a("#confirmBtn").show(),a("#oldAccount").show(),a("#skip").hide(),a("#modifyDone").hide()),a("#confirmBtn").unbind().click(function(){var d="authenticator",e={},f=4;return c()?(a("#rightIndex").hide(),e.username=a("#mOldLgUsr").val(),e.newUsername=a("#mNewLgUsr").val(),e.password=a("#mOldLgPsw").val(),e.newPassword=a("#mNewLgPsw").val(),callJSON(d,f,e,function(c){return 0===c.result?(phonePage.showToast(a.i18n.prop("pSaveText"),"images/phone/saved.png"),b?(modifyPswRemind=!1,phonePage.setContentPage("status")):phonePage.setContentPage("modifyPasswd")):1===c.result?phonePage.showToast(a.i18n.prop("authErr")):2===c.result&&phonePage.showToast(a.i18n.prop("failedText"),"images/phone/saveFail.png"),!1}),void 0):!1})}var e=!0;a.modifyPasswd={onLoad:function(){b()},onEnter:function(){a("#pageFooter").hide(),d()},onLeave:function(){a("input").val("").parent().removeClass("alert"),a(".errTip").hide(),a("#rightIndex").hide(),a("#pswWeak").removeClass("active"),a("#pswNormal").removeClass("active"),a("#pswStrong").removeClass("active"),a("#pageFooter").show()}}}(jQuery),function(a){"use strict";var b={setupListeners:function(){a("#pMsgWrite").on("click",function(){phonePage.setContentPage("msgWrite")}),a("#pMsgInbox").on("click",function(){phonePage.setContentPage("msgInbox")})}};a.msg={onLoad:function(){a("#backBtn").hide(),a("#confirmBtn").hide(),b.setupListeners()},onLeave:function(){},ondata:function(){}}}(jQuery),function(a){function b(){var b={};b.pageNumber=n,b.amountPerPage=t.amountPerPage,b.box=t.box,callJSON(m,t.SMS_READ_MSG,b,function(b){r!==s.CHECKING&&(r=s.READING),a("msg-inbox-load")[0]?setTimeout(function(){c(b),a("#pMsgInboxLoad").addClass("hide")},300):c(b)})}function c(b){if(a("#pMsgInboxLoad").addClass("hide"),a("#pMsgInboxEmpty").addClass("hide"),0===b.result){var c=b.messageList,e=Math.ceil(b.totalNumber/t.amountPerPage);p=b.totalNumber,o=n>=e?!1:!0,c&&c.length?(d(c),a(".list-item").each(function(b,c){a(c).unbind().bind("click",i)}),o?a("#pMsgLoadBtn").removeClass("hide"):a("#pMsgLoadBtn").addClass("hide")):a("#pMsgInboxEmpty").removeClass("hide"),r===s.CHECKING&&(a("#pMsgCheckText").text(a.i18n.prop("pMsgCheckText")),a(".list-item").each(function(b,c){a(c.firstChild).removeClass("hide"),a(c.lastChild).css("width","86%")}))}else phonePage.showToast(a.i18n.prop("pMsgUnknownErr"),"images/phone/saveFail.png")}function d(b){var c="",d=[];a(b).each(function(a,b){c=e(b),d.push(c)}),d=d.join(""),1===n&&a("#pMsgList").html(""),a("#pMsgList").append(d)}function e(a){return'<div id="'+a.index+'" class="list-item"><div class="item-action hide"><img src="images/phone/unchecked.png"></div><div class="item-content"><p class="content-header"><img src="images/phone/msg-'+(a.unread?"unread":"read")+'.png" class="content-icon"/><span class="content-title">'+a.from+'</span><span class="content-append">'+f(a.receivedTime)+'</span><span id="pMsgTimeFull" class="hide">'+a.receivedTime+'</span></p><p class="content-detail">'+replace_script_tag(a.content)+"</p></div></div>"}function f(a){var b="";if(a=a.toString(),""===a)b="00:00:00";else{var c=a.split(" "),d=c[0].split("-"),e=new Date;b=e.getFullYear()===Number(d[0])&&e.getMonth()+1===Number(d[1])&&e.getDate()===Number(d[2])?c[1]:c[0]}return b}function g(){return'<div id="pMsgInboxHeader" class="msg-inbox-header"><a id="pMsgCheckAll" class="page-header-btn text-left hide"><span id="pMsgCheckText">'+a.i18n.prop("pMsgCheckText")+'</span></a><a id="pMsgRefresh" class="page-header-btn icon-right"><img class="operateBtn" src="images/phone/refresh.png"/></a><a id="pMsgDeleteOpen" class="page-header-btn icon-right"><img class="operateBtn" src="images/phone/delete.png"/></a><a id="pMsgDelete" class="page-header-btn text-right hide"><span id="pMsgDeleteText">'+a.i18n.prop("pMsgDeleteText")+'</span></a><a id="pMsgCancel" class="page-header-btn text-right hide"><span id="pMsgCancelText">'+a.i18n.prop("pMsgCancelText")+"</span></a></div>"}function h(){a("#pMsgCheckAll").on("click",function(){r===s.CHECKING&&(q!==p?(a(".item-action").each(function(b,c){a(c).parent().addClass("checked"),a(c.firstChild).attr("src","images/phone/checked.png")}),a("#pMsgCheckText").text(a.i18n.prop("pMsgUnCheckText")),q=a(".list-item").length):(a(".item-action").each(function(b,c){a(c).parent().removeClass("checked"),a(c.firstChild).attr("src","images/phone/unchecked.png")}),a("#pMsgCheckText").text(a.i18n.prop("pMsgCheckText")),q=0))}),a("#pMsgRefresh").on("click",function(){r=s.LOADING,a("#pMsgInboxLoad").removeClass("hide"),n=1,b()}),a("#pMsgDeleteOpen").on("click",function(){""!==a("#pMsgList").html()&&(r=s.CHECKING,a("#pMsgCheckText").text(a.i18n.prop("pMsgCheckText")),q=0,a("#backBtn").css("display","none"),a("#pMsgDeleteOpen").addClass("hide"),a("#pMsgRefresh").addClass("hide"),a("#pageHeaderTitle").hide(),a("#pMsgCheckAll").removeClass("hide"),a("#pMsgCancel").removeClass("hide"),a("#pMsgDelete").removeClass("hide"),a(".list-item").each(function(b,c){a(c.firstChild).removeClass("hide"),a(c.lastChild).css("width","86%")}))}),a("#confirmOK").text(a.i18n.prop("deleteOK")),a("#confirmText").text(a.i18n.prop("smsDeleteConfirmText")),a("#pMsgDelete").on("click",function(){0!==q&&a("#confirmPopup").popup("show")}),a("#confirmOK").unbind().click(function(){a("#confirmPopup").popup("hide"),r=s.READING,k(),a("#backBtn").css("display","block"),a("#pMsgDeleteOpen").removeClass("hide"),a("#pMsgRefresh").removeClass("hide"),a("#pMsgCheckAll").addClass("hide"),a("#pMsgCancel").addClass("hide"),a("#pMsgDelete").addClass("hide"),a("#pageHeaderTitle").show()}),a("#pMsgCancel").on("click",function(){r=s.READING,q=0,a("#backBtn").css("display","block"),a("#pMsgDeleteOpen").removeClass("hide"),a("#pMsgRefresh").removeClass("hide"),a("#pMsgCheckAll").addClass("hide"),a("#pMsgCancel").addClass("hide"),a("#pMsgDelete").addClass("hide"),a("#pageHeaderTitle").show(),o&&a("#pMsgLoadBtn").removeClass("hide"),a(".list-item").each(function(b,c){a(c.firstChild.firstChild).attr("src","images/phone/unchecked.png"),a(c.firstChild).addClass("hide"),a(c.lastChild).css("width","100%"),a(c).removeClass("checked")})})}function i(){var b=this;r===s.READING?j(b):r===s.CHECKING&&(a(b).hasClass("checked")?(a(b.firstChild.firstChild).attr("src","images/phone/unchecked.png"),a(b).removeClass("checked"),q===p&&a("#pMsgCheckText").text(a.i18n.prop("pMsgCheckText")),q--):(a(b.firstChild.firstChild).attr("src","images/phone/checked.png"),a(b).addClass("checked"),q++,q===p&&a("#pMsgCheckText").text(a.i18n.prop("pMsgUnCheckText"))))}function j(b){PhonePanelNs.msgItem={},a(b).children("p img").attr("img","images/phone/msg-read.png"),PhonePanelNs.msgItem.from=a(b).find(".content-title").text(),PhonePanelNs.msgItem.content=a(b).find(".content-detail").text(),PhonePanelNs.msgItem.receivedTime=a(b).find("#pMsgTimeFull").text(),PhonePanelNs.msgItem.index=a(b).attr("id"),l(Number(a(b).attr("id"))),phonePage.setContentPage("msgRead")}function k(){var c={};c.deleteMessages=[],q===p?c.deleteMessages=[-2]:a(".list-item").each(function(b,d){a(d).hasClass("checked")&&c.deleteMessages.push(parseInt(a(d).attr("id").replace(/\D/g,""),10)),a(d.firstChild).addClass("hide"),a(d.lastChild).css("width","100%")}),c.box=t.box,c.deleteMessages.length&&callJSON(m,t.SMS_DELETE_MSG,c,function(c){var d="";0===c.result?(q===p?(q=0,d=a.i18n.prop("pMsgClearSuccess")):d=a.i18n.prop("deleteSuccessText"),phonePage.showToast(d,"images/phone/saved.png")):(q===p?(q=0,d=a.i18n.prop("pMsgClearFailed")):d=a.i18n.prop("deleteFailedText"),phonePage.showToast(d,"images/phone/saveFail.png")),a("#pMsgList").html(""),a("#pMsgInboxLoad").removeClass("hide"),n=1,b()})}function l(a){var b={};b.markReadMessage=a,callJSON(m,t.SMS_MARK_READ,b)}var m="message",n=1,o=!0,p=0,q=0,r=0,s={READING:0,CHECKING:1,LOADING:2},t={SMS_READ_MSG:2,SMS_DELETE_MSG:5,SMS_MARK_READ:6,box:0,amountPerPage:8},u={setupListeners:function(){a("#pMsgLoadBtn").unbind().click(function(){n++,b(),a("#pMsgLoadBtn").addClass("hide")})}};a.msgInbox={onLoad:function(){u.setupListeners()},onEnter:function(){a("#pageFooter").hide(),a("#pageHeader").append(g()),a("#pMsgList").html(""),a("#pMsgInboxLoad").removeClass("hide"),n=1,h(),b()},onLeave:function(){a("#pMsgInboxHeader")[0]&&a("#pMsgInboxHeader").detach(),a("#pMsgLoadBtn").addClass("hide"),a("#pageFooter").show(),a(".list-item").unbind()}}}(jQuery),function(a){var b={setupListeners:function(){a("#pMsgReadAck").on("click.ori",function(){PhonePanelNs.msgItem.replyType="ack",phonePage.setContentPage("msgReply")}),a("#pMsgReadRep").on("click.ori",function(){PhonePanelNs.msgItem.replyType="rep",phonePage.setContentPage("msgReply")})},initContent:function(){if(PhonePanelNs.msgItem&&(a("#pMsgReadNum").text(PhonePanelNs.msgItem.from),a("#pMsgReadTime").text(PhonePanelNs.msgItem.receivedTime),a("#msgCon").text(PhonePanelNs.msgItem.content),get_ua_type().android2x)){var b=a(window).height()>a(window).width()?a(window).height():a(window).width(),c=a("#pageHeader").height()+a("#pMsgReadTitle").outerHeight()+a("#pMsgReadButton").outerHeight()+39;a("#msgCon").height()+c<=b?(a("#pMsgReadText").height(b-c),a("#msgReadContent").height("100%")):(a("#pMsgReadText").height("auto"),a("#msgReadContent").height("auto"))}}};a.msgRead={onLoad:function(){b.setupListeners(),b.initContent()},onEnter:function(){a("#pageFooter").hide(),b.initContent()},onLeave:function(){a("#pMsgReadNum").html(""),a("#pMsgReadTime").html(""),a("#msgCon").html(""),a("#pageFooter").show()},ondata:function(){}}}(jQuery),function(a){function b(b){a("#loadingPopup").popup("show"),0===b.result?(e=f>1?n:m,c()):phonePage.showToast(a.i18n.prop("pMsgSendFail"),"images/phone/saveFail.png")}function c(){e||(e=m),callJSON(g,h.SMS_GET_SEND_RES,null,function(b){if(l++>=e)return a("#loadingPopup").popup("hide"),phonePage.showToast(a.i18n.prop("pMsgSendTimeout"),"images/phone/saveFail.png"),l=0,e=null,void 0;var d,f=b.result;f===o.SENDING?setTimeout(c,3e3):f===o.SEND_SUCC_SAVE_SUCC||f===o.SEND_SUCC_SAVE_FAIL?(l=0,e=null,a("#loadingPopup").popup("hide"),phonePage.showToast(a.i18n.prop("pMsgSendSucc"),"images/phone/saved.png"),phonePage.setContentPage("msg")):f===o.SEND_FAIL_SAVE_SUCC||f===o.SEND_FAIL_SAVE_FAIL?(l=0,e=null,a("#loadingPopup").popup("hide"),phonePage.showToast(a.i18n.prop("pMsgSendFail"),"images/phone/saveFail.png")):(d=a.i18n.prop("pMsgUnknownErr"),l=0,e=null,a("#loadingPopup").popup("hide"),phonePage.showToast(a.i18n.prop("pMsgUnknownErr"),"images/phone/saveFail.png"))})}function d(b,c){var d=a(b).val()||"",e=d.length;if(i>=e||70!=j&&67!=j){for(var g=i>=e?0:i;e>g;g++)if(d.charCodeAt(g)>=128){j=70;break}g===e&&(j=160)}e>j&&(160===j?j=153:70===j&&(j=67));var h=e%j;f=0===h?e/j:(e-h)/j+1;var l=0===h&&f>0?h:j-h;return a(c).text(l+" ("+f+")"),i=e,f>k?!1:!0}var e,f,g="message",h={SMS_SEND_MSG:3,SMS_GET_SEND_RES:7},i=0,j=160,k=5,l=0,m=10,n=20,o={SEND_SUCC_SAVE_SUCC:0,SEND_SUCC_SAVE_FAIL:1,SEND_FAIL_SAVE_SUCC:2,SEND_FAIL_SAVE_FAIL:3,SENDING:4},p=!0,q={setupListeners:function(){a("#pMsgReplyText").on("keyup keydown blur",function(){d("#pMsgReplyText","#pMsgReplyLength")?(a(this).parent().removeClass("alert"),a("#pMsgReplyErrTip").hide()):(p=!1,a(this).parent().addClass("alert"),a("#pMsgReplyErrTip").text(a.i18n.prop("pMsgTooLongError")).show())}),a("#pMsgReplyText").blur(function(){d("#pMsgReplyText","#pMsgReplyLength")?""===a("#pMsgReplyText").val()?(p=!1,a(this).parent().addClass("alert"),a("#pMsgReplyErrTip").text(a.i18n.prop("pEmptyErr")).show()):(a(this).parent().removeClass("alert"),a("#pMsgReplyErrTip").hide()):(p=!1,a(this).parent().addClass("alert"),a("#pMsgReplyErrTip").text(a.i18n.prop("pMsgTooLongError")).show())}),a("#pMsgReplyNum").blur(function(){isMobileNumValid(a("#pMsgReplyNum").val())?""===a("#pMsgReplyNum").val()?(p=!1,a(this).parent().addClass("alert"),a("#msgReplyNumberErr").text(a.i18n.prop("pEmptyErr")).show()):(a(this).parent().removeClass("alert"),a("#msgReplyNumberErr").hide()):(p=!1,a(this).parent().addClass("alert"),a("#msgReplyNumberErr").text(a.i18n.prop("errMsgInvalidPhone")).show())}),a("#loadingPopup").popup({noXButton:!0})},setContent:function(){"ack"===PhonePanelNs.msgItem.replyType?(a("#pMsgReplyNum").val(PhonePanelNs.msgItem.from),a("#pMsgReplyText").val(""),a("#pMsgOldNum").text(PhonePanelNs.msgItem.from),a("#pMsgOldTime").text(PhonePanelNs.msgItem.receivedTime),a("#pMsgOldText").text(PhonePanelNs.msgItem.content),a("#pageHeaderTitle").html(a.i18n.prop("pMsgAck")),a("#pMsgAckOld").hasClass("hide")&&a("#pMsgAckOld").removeClass("hide")):"rep"===PhonePanelNs.msgItem.replyType&&(a("#pMsgReplyNum").val(""),a("#pMsgReplyText").val(PhonePanelNs.msgItem.content),a("#pageHeaderTitle").text(a.i18n.prop("pMsgReply")),a("#pMsgAckOld").hasClass("hide")===!1&&a("#pMsgAckOld").addClass("hide")),d("#pMsgReplyText","#pMsgReplyLength")},clearContent:function(){a("#pMsgOldNum").html(""),a("#pMsgOldTime").html(""),a("#pMsgOldText").html(""),a("#pMsgReplyNum").val(""),a("#pMsgReplyText").val(""),a("#pMsgAckOld").addClass("hide")},postData:function(){var c={},d=new Date,e=[d.getFullYear(),d.getMonth()+1,d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds()].join(",");f>k||(c.sendMessage={},c.sendMessage.to=a("#pMsgReplyNum").val(),c.sendMessage.textContent=a("#pMsgReplyText").val(),c.sendMessage.sendTime=e,callJSON(g,h.SMS_SEND_MSG,c,b))}};a.msgReply={onLoad:function(){q.setContent(),q.setupListeners()},onLeave:function(){a("#confirmBtn").removeClass("icon-right").addClass("text-right").find("span").show().siblings().remove(),q.clearContent(),PhonePanelNs.msgItem.replyType=""},onEnter:function(){a("#pageFooter").hide(),q.setContent(),a("#confirmBtn").append('<img class="operateBtn" style="top: -4px;" src="images/phone/send.png"/>').find("span").hide(),a(".errTip").hide(),a(".alert").removeClass("alert"),a("#confirmBtn").unbind().click(function(){p=!0,a("#pMsgReplyNum").blur(),a("#pMsgReplyText").blur(),p&&q.postData()})},onLeave:function(){a("#confirmBtn").find("img").remove(),a("#confirmBtn").find("span").show(),a("#pageFooter").show()}}}(jQuery),function(a){function b(b){a("#loadingPopup").popup("show"),0===b.result?(e=f>1?n:m,c()):phonePage.showToast(a.i18n.prop("pMsgSendFail"),"images/phone/saveFail.png")}function c(){e||(e=m),callJSON(g,h.SMS_GET_SEND_RES,null,function(b){if(l++>=e)return a("#loadingPopup").popup("hide"),phonePage.showToast(a.i18n.prop("pMsgSendTimeout"),"images/phone/saveFail.png"),l=0,e=null,void 0;var d,f=b.result;f===o.SENDING?setTimeout(c,3e3):f===o.SEND_SUCC_SAVE_SUCC||f===o.SEND_SUCC_SAVE_FAIL?(l=0,e=null,a("#loadingPopup").popup("hide"),phonePage.showToast(a.i18n.prop("pMsgSendSucc"),"images/phone/saved.png"),phonePage.setContentPage("msg")):f===o.SEND_FAIL_SAVE_SUCC||f===o.SEND_FAIL_SAVE_FAIL?(l=0,e=null,a("#loadingPopup").popup("hide"),phonePage.showToast(a.i18n.prop("pMsgSendFail"),"images/phone/saveFail.png")):(d=a.i18n.prop("pMsgUnknownErr"),l=0,e=null,a("#loadingPopup").popup("hide"),phonePage.showToast(a.i18n.prop("pMsgUnknownErr"),"images/phone/saveFail.png"))})}function d(b,c){var d=a(b).val()||"",e=d.length;if(i>=e||70!=j&&67!=j){for(var g=i>=e?0:i;e>g;g++)if(d.charCodeAt(g)>=128){j=70;break}g===e&&(j=160)}e>j&&(160===j?j=153:70===j&&(j=67));var h=e%j;f=0===h?e/j:(e-h)/j+1;var l=0===h&&f>0?h:j-h;return a(c).text(l+" ("+f+")"),i=e,f>k?!1:!0}var e,f,g="message",h={SMS_SEND_MSG:3,SMS_GET_SEND_RES:7},i=0,j=160,k=5,l=0,m=10,n=20,o={SEND_SUCC_SAVE_SUCC:0,SEND_SUCC_SAVE_FAIL:1,SEND_FAIL_SAVE_SUCC:2,SEND_FAIL_SAVE_FAIL:3,SENDING:4},p=!0,q={setupListeners:function(){a("#pMsgWriteText").on("keyup keydown blur",function(){d("#pMsgWriteText","#pMsgWriteLength")?(a(this).parent().removeClass("alert"),a("#pMsgWriteErrTip").hide()):(p=!1,a(this).parent().addClass("alert"),a("#pMsgWriteErrTip").text(a.i18n.prop("pMsgTooLongError")).show())}),a("#pMsgWriteText").blur(function(){d("#pMsgWriteText","#pMsgWriteLength")?""===a("#pMsgWriteText").val()?(p=!1,a(this).parent().addClass("alert"),a("#pMsgWriteErrTip").text(a.i18n.prop("pEmptyErr")).show()):(a(this).parent().removeClass("alert"),a("#pMsgWriteErrTip").hide()):(p=!1,a(this).parent().addClass("alert"),a("#pMsgWriteErrTip").text(a.i18n.prop("pMsgTooLongError")).show())}),a("#pMsgReceiverNum").blur(function(){isMobileNumValid(a("#pMsgReceiverNum").val())?""===a("#pMsgReceiverNum").val()?(p=!1,a(this).parent().addClass("alert"),a("#msgWriteNumberErr").text(a.i18n.prop("pEmptyErr")).show()):(a(this).parent().removeClass("alert"),a("#msgWriteNumberErr").hide()):(p=!1,a(this).parent().addClass("alert"),a("#msgWriteNumberErr").text(a.i18n.prop("errMsgInvalidPhone")).show())}),a("#loadingPopup").popup({noXButton:!0})},postData:function(){var c={},d=new Date,e=[d.getFullYear(),d.getMonth()+1,d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds()].join(",");f>k||(c.sendMessage={},c.sendMessage.to=a("#pMsgReceiverNum").val(),c.sendMessage.textContent=a("#pMsgWriteText").val(),c.sendMessage.sendTime=e,callJSON(g,h.SMS_SEND_MSG,c,b))},setContent:function(){a("#msgWriteContent").hasClass("hide")&&a("#msgWriteContent").removeClass("hide"),d("#pMsgWriteText","#pMsgWriteLength")}};a.msgWrite={onLoad:function(){q.setContent(),q.setupListeners()},onEnter:function(){a("#confirmBtn").append('<img class="operateBtn" style="top: -4px;" src="images/phone/send.png"/>').find("span").hide(),a("#msgWriteContent .content-group").removeClass("hide"),a("#pageFooter").hide(),d("#pMsgWriteText","#pMsgWriteLength"),a("#confirmBtn").unbind().click(function(){p=!0,a("#pMsgReceiverNum").blur(),a("#pMsgWriteText").blur(),p&&q.postData()})},onLeave:function(){a("#confirmBtn").find("img").remove(),a("#confirmBtn").find("span").show(),a("#pMsgReceiverNum").val(""),a("#pMsgWriteText").val(""),a("#pMsgWriteErrTip").hide(),a("#msgWriteNumberErr").hide(),a(".alert").removeClass("alert"),a("#pageFooter").show()}}}(jQuery),function(a){function b(){getConfigJSON(f,c)}function c(b){switch(b.networkPreferredMode){case g.lte:a("#networkModeSelect").get(0).selectedIndex=0;break;case g.G4:a("#networkModeSelect").get(0).selectedIndex=1;break;case g.G3:a("#networkModeSelect").get(0).selectedIndex=2;break;default:a("#networkModeSelect").get(0).selectedIndex=0}1===b.cardType&&a("#networkModeSelect option[value='1']").remove(),a("#networkModeSelect").change(),a("#confirmBtn").unbind().click(function(){e()})}function d(){a("#networkModeSelect").change(function(){a("#networkModeSelect").parent().find(".dropdown-toggle").text(a("#networkModeSelect").find("option:selected").text())})}function e(){var b={};switch(a("#networkModeSelect").get(0).selectedIndex){case 0:b.networkPreferredMode=g.lte;break;case 1:b.networkPreferredMode=g.G4;break;case 2:b.networkPreferredMode=g.G3;break;default:b.networkPreferredMode=g.lte}callJSON(f,h.set_config,b,function(b){0===b.result?(phonePage.showToast(a.i18n.prop("pSaveText"),"images/phone/saved.png"),a("#nocardErrMessage").text(a.i18n.prop(""))):1===b.result?phonePage.showToast(a.i18n.prop("failedText"),"images/phone/saveFail.png"):2===b.result&&a("#nocardErrMessage").text(a.i18n.prop("networkNoCardError")).show()})}var f="wan",g={lte:3,G4:2,G3:1},h={set_config:1,setNetworkSelectionMode:8,quary_availabel_network:9,get_network_selection_status:10};a.networkMode={onLoad:function(){d()},onEnter:function(){a("#pageFooter").hide(),b()},onLeave:function(){a(".errTip").hide()}}}(jQuery),function(a){function b(){getConfigJSON(n,c)}function c(a){o=a.clientMac,k=null==o||""==o?0:1,l=a.denyList?a.denyList:[],getConfigJSON(m,d)}function d(b){var c,d={};if(j=b.STAs.list,!j||0===j.length)return a("#pConnectedDevicesLoad").hide(),a(".myDevice").hide(),a(".clients").hide(),a("#pConnectedDevicesEmpty").show(),void 0;for(a(".myDevice").show(),a("#pConnectedDevicesEmpty").hide(),0===k?a(".myDevice").hide():a(".myDevice").show(),a("#connectedDeviceList").html(""),q=j.length-k,0===q?a(".clients").hide():a(".clients").show(),c=0;c<j.length;c++)d=j[c],o===d.mac?(a("#myDeviceTitle").text(d.name),a("#myDeviceMac").text(d.mac)):a("#connectedDeviceList").append(f(d));r=!1,a("#pConnectedDevicesLoad").hide(),a(".device-item").each(function(b,c){a(c).unbind().bind("click",e)})}function e(){var b=this;r&&(a(b).hasClass("checked")?(a(b.firstChild.firstChild).attr("src","images/phone/unchecked.png"),a(b).removeClass("checked"),p===q&&a("#pDeviceCheckAll").text(a.i18n.prop("pDeviceCheckText")),p--):(a(b.firstChild.firstChild).attr("src","images/phone/checked.png"),a(b).addClass("checked"),p++,p===q&&a("#pDeviceCheckAll").text(a.i18n.prop("pDeviceUnCheckText"))))}function f(a){return'<div class="device-item devices-content"><div class="item-action online-action hide"><img src="images/phone/unchecked.png"></div><div class="content-header"><img src="images/phone/client.png" class="content-icon"/><span class="content-title onlineName">'+a.name+'</span><div class="list-content-patch">'+a.mac+"</div></div></div>"}function g(){return'<div id="pConnectedDevicesHeader"><a id="pDeviceCheckAll" class="page-header-btn text-left hide"><span id="pDeviceCheckText"></span></a><a id="pDeviceRefresh" class="page-header-btn icon-right"><img class="operateBtn" src="images/phone/refresh.png"/></a><a id="pDeviceBlockOpen" class="page-header-btn icon-right"><img class="operateBtn" style="top:-3px;" src="images/phone/block.png"/></a><a id="pDeviceBlock" class="page-header-btn text-right hide"><span id="pBlockText">'+a.i18n.prop("pBlockText")+'</span></a><a id="pDeviceBlockCancel" class="page-header-btn text-right hide"><span id="pBlockCancelText">'+a.i18n.prop("pBlockCancelText")+"</span></a></div>"}function h(){var c,d={},e={},f=0;if(c=l.length+p,c>10)return phonePage.showToast(a.i18n.prop("pBlockOverText"),"images/phone/warning.png"),void 0;if(p===q)for(f=0;f<j.length;f++)o!==j[f].mac&&(e={},e.mac=j[f].mac.replace(/:/g,"-"),e.description=j[f].name,l.push(e));else a(".device-item").each(function(b,c){a(c).hasClass("checked")&&(e={},e.mac=a(c.lastChild).find(".list-content-patch").text().replace(/:/g,"-"),e.description=a(c.lastChild).find(".onlineName").text(),l.push(e)),a(c.firstChild).addClass("hide"),a(c.lastChild).css("width","100%")});d.mode=1,d.enable=!0,d.denyList=l,callJSON(n,1,d,function(c){0===c.result?(a("#pDeviceBlockCancel").click(),a("#pConnectedDevicesLoad").show(),b(),phonePage.showToast(a.i18n.prop("successfullTip"),"images/phone/saved.png")):phonePage.showToast(a.i18n.prop("blockFailedTip"),"images/phone/saveFail.png")})}function i(){a("#pDeviceRefresh").unbind().click(function(){a("#pConnectedDevicesLoad").show(),b()}),a("#pDeviceBlockOpen").on("click",function(){""!==a("#connectedDeviceList").html()&&(r=!0,a("#pDeviceCheckAll").text(a.i18n.prop("pDeviceCheckText")),p=0,a("#backBtn").css("display","none"),a("#pDeviceBlockOpen").hide(),a("#pDeviceRefresh").hide(),a("#pageHeaderTitle").hide(),a("#pDeviceCheckAll").show(),a("#pDeviceBlockCancel").show(),a("#pDeviceBlock").show(),a(".device-item").each(function(b,c){a(c.firstChild).show(),a(c.lastChild).css("width","86%")}),a(".list-content-patch").css("margin","-12px 75px 0"),a(".onlineName").css("width","65%"))}),a("#pDeviceCheckAll").unbind().click(function(){p!==q?(a(".online-action").each(function(b,c){a(c).parent().addClass("checked"),a(c.firstChild).attr("src","images/phone/checked.png")}),a("#pDeviceCheckAll").text(a.i18n.prop("pDeviceUnCheckText")),p=q):(a(".online-action").each(function(b,c){a(c).parent().removeClass("checked"),a(c.firstChild).attr("src","images/phone/unchecked.png")
}),a("#pDeviceCheckAll").text(a.i18n.prop("pDeviceCheckText")),p=0)}),a("#confirmOK").text(a.i18n.prop("blockText")),a("#confirmText").text(a.i18n.prop("blockConfirmText")),a("#pDeviceBlock").on("click",function(){return 0===p?(phonePage.showToast(a.i18n.prop("blockNoneTip"),"images/phone/warning.png"),void 0):(a("#confirmPopup").popup("show"),void 0)}),a("#confirmOK").unbind().click(function(){a("#confirmPopup").popup("hide"),h()}),a("#pDeviceBlockCancel").on("click",function(){p=0,r=!1,a("#backBtn").css("display","block"),a("#pDeviceCheckAll").hide(),a("#pDeviceBlockCancel").hide(),a("#pDeviceBlock").hide(),a("#pDeviceBlockOpen").show(),a("#pDeviceRefresh").show(),a("#pageHeaderTitle").show(),a(".device-item").each(function(b,c){a(c.firstChild.firstChild).attr("src","images/phone/unchecked.png"),a(c.firstChild).hide(),a(c.lastChild).css("width","100%"),a(c).removeClass("checked")}),a("#pDeviceCheckAll").text(a.i18n.prop("pDeviceCheckText")),a(".list-content-patch").css("margin","-12px 38px 0"),a(".onlineName").css("width","80%")})}var j,k,l,m="connectedDevices",n="macFilters",o="",p=0,q=0,r=!1;a.onlineClients={onEnter:function(){a("#pageFooter").hide(),a(".myDevice").hide(),a(".clients").hide(),a("#pageHeader").append(g()),a("#pConnectedDevicesLoad").show(),a("#connectedDeviceList").html(""),b(),i()},onLeave:function(){a("#pConnectedDevicesHeader")[0]&&a("#pConnectedDevicesHeader").detach(),a("#pageFooter").show()}}}(jQuery);var imagePath="images/phone/",phonePage=new PhonePage(jQuery),heartbeatTimer=null,modifyPswRemind=!1,onConfirmBtnClick=null,simLocked=!1,REBOOT_TIME=35,SHUTDOWN_TIME=5,RESTORE_TIME=45,WIFI_REBOOT_TIME=10,WPS_TIME=10;!function(a){function b(b,c){a("#SIMStatus").text(a.i18n.prop(b)),a("#pinManagementContent input[type=text]").val(""),c||(c={}),c.pinEnable?a("#pPinEnableDiv").show():a("#pPinEnableDiv").hide(),c.pinInput?a("#pPinInputDiv").show():a("#pPinInputDiv").hide(),c.pukInput?a("#pPukInputDiv").show():a("#pPukInputDiv").hide(),c.autoUnlock?a("#pAutoUnlockDiv").show():a("#pAutoUnlockDiv").hide(),c.buttonTextId&&a("#confirmBtn").hide()}function c(){var b,c,d,e,g,h={},n=m.getConfig;if(j){if(j.cardState===k.present)switch(a("#pAutoUnlockDiv").is(":visible")&&(h.autoUnlock=a("#autoUnlockSwitch").switchButton("checked")),g=a("#pinEnableSwitch").switchButton("checked"),j.pinState){case l.notVerified:if(b=a("#pPinInput").val(),i=!0,a("#pPinInput").blur(),!i)return!1;h.pin=b,n=m.unlockPIN;break;case l.verified:if(b=a("#pPinInput").val(),!g){if(i=!0,a("#pPinInput").blur(),!i)return!1;h.pin=b,n=m.disablePIN;break}if(h.autoUnlock!==j.autoUnlock){n=m.setAutoUnlock;break}n=m.setAutoUnlock;break;case l.disabled:if(b=a("#pPinInput").val(),g){if(i=!0,a("#pPinInput").blur(),!i)return!1;h.pin=b,n=m.enablePIN;break}if(h.autoUnlock!==j.autoUnlock&&j.autoUnlock===!0){n=m.setAutoUnlock;break}n=m.setAutoUnlock;break;case l.pukLock:if(e=a("#pPukInput").val(),c=a("#pNewPinInput").val(),d=a("#pConfirmPinInput").val(),i=!0,a("#pPukInput").blur(),a("#pNewPinInput").blur(),a("#pConfirmPinInput").blur(),!i)return!1;h.puk=e,h.newPin=c,n=m.unlockPUK}callJSON("simLock",n,h,function(b){0===b.result?(phonePage.showToast(a.i18n.prop("pSaveText"),"images/phone/saved.png"),getConfigJSON("simLock",f)):(n===m.unlockPIN||n===m.enablePIN||n===m.disablePIN?phonePage.showToast(a.i18n.prop("pinWrong"),"images/phone/saveFail.png"):n===m.unlockPUK?phonePage.showToast(a.i18n.prop("pukWrong"),"images/phone/saveFail.png"):phonePage.showToast(a.i18n.prop("pinFailedText"),"images/phone/saveFail.png"),getConfigJSON("simLock",f))})}}function d(b){a("#pRemainingPinAttemptsLbl").html(a.i18n.prop("remainingPinAttempts")+'<span class="remainingNumber">'+b+"</span>")}function e(b){a("#pRemainingPukAttemptsLbl").html(a.i18n.prop("remainingPukAttempts")+'<span class="remainingNumber">'+b+"</span>")}function f(c){if(c.pinRemainingTimes&&d(c.pinRemainingTimes),c.pukRemainingTimes&&e(c.pukRemainingTimes),c.cardState!==k.present)return b("noSim",{buttonTextId:"pinManagementRefresh"}),void 0;switch(c.pinState){case l.unknown:b("SIMStatusUnknown",{buttonTextId:"pinManagementRefresh"});break;case l.notVerified:b("SIMStatusPinLocked",{pinInput:!0,autoUnlock:!0}),a("#autoUnlockSwitch").switchButton("changeState",c.autoUnlock,!0);break;case l.verified:b("SIMStatusPinVerified",{pinEnable:!0,autoUnlock:!0}),a("#pinEnableSwitch").switchButton("changeState",!0,!0),a("#autoUnlockSwitch").switchButton("changeState",c.autoUnlock,!0);break;case l.disabled:b("SIMStatusPinDisabled",{pinEnable:!0,autoUnlock:!0}),a("#pinEnableSwitch").switchButton("changeState",!1,!0),a("#autoUnlockSwitch").switchButton("changeState",c.autoUnlock,!0);break;case l.pukLock:b("SIMStatusPukLocked",{pukInput:!0,autoUnlock:!0});break;case l.blocked:b("SIMStatusBlocked",{buttonTextId:"pinManagementRefresh"});break;default:b("SIMStatusUnknown",{buttonTextId:"pinManagementRefresh"})}j=c}function g(){getConfigJSON("simLock",f),a("#confirmBtn").unbind().click(function(){return c()})}function h(){var b,c,d,e;a("#pinEnableSwitch").switchButton({onChanged:function(b){j&&(j.pinState===l.disabled&&b||j.pinState===l.verified&&!b)?a("#pPinInputDiv").show():a("#pPinInputDiv").hide()}}),a("#autoUnlockSwitch").switchButton(),a("#pPinInput").blur(function(){b=a(this).val(),b?pinValid(b)?(a(this).parent().removeClass("alert"),a("#pPinInputErr").text("").hide()):(i=!1,a(this).parent().addClass("alert"),a("#pPinInputErr").text(a.i18n.prop("pinInvalid")).show()):(i=!1,a(this).parent().addClass("alert"),a("#pPinInputErr").text(a.i18n.prop("pEmptyErr")).show())}),a("#pPukInput").blur(function(){c=a(this).val(),c?pukValid(c)?(a(this).parent().removeClass("alert"),a("#pPukInputErr").text("").hide()):(i=!1,a(this).parent().addClass("alert"),a("#pPukInputErr").text(a.i18n.prop("pukInvalid")).show()):(i=!1,a(this).parent().addClass("alert"),a("#pPukInputErr").text(a.i18n.prop("pEmptyErr")).show())}),a("#pNewPinInput").blur(function(){d=a(this).val(),d?pinValid(d)?(a(this).parent().removeClass("alert"),a("#pNewPinInputErr").text("").hide()):(i=!1,a(this).parent().addClass("alert"),a("#pNewPinInputErr").text(a.i18n.prop("pinInvalid")).show()):(i=!1,a(this).parent().addClass("alert"),a("#pNewPinInputErr").text(a.i18n.prop("pEmptyErr")).show())}),a("#pConfirmPinInput").blur(function(){e=a(this).val(),e?e!==d?(i=!1,a(this).parent().addClass("alert"),a("#pConfirmPinInputErr").text(a.i18n.prop("notSamePin")).show()):(a(this).parent().removeClass("alert"),a("#pConfirmPinInputErr").text("").hide()):(i=!1,a(this).parent().addClass("alert"),a("#pConfirmPinInputErr").text(a.i18n.prop("pEmptyErr")).show())})}var i=!0,j={},k={absent:0,present:1,error:2},l={unknown:0,notVerified:1,verified:2,disabled:3,pukLock:4,blocked:5},m={getConfig:0,enablePIN:1,disablePIN:2,modifyPIN:3,unlockPIN:4,unlockPUK:5,setAutoUnlock:6};a.pinManagement={onLoad:function(){j=null,h()},onEnter:function(){a("#pageFooter").hide(),g()},onLeave:function(){j=null,a(".alert").removeClass("alert"),a(".errTip").hide()}}}(jQuery),function(a){function b(a){getConfigJSON(f,function(b){c(b,a)})}function c(b,c){j=a.extend({},b),c||(a("#powerSaveSwitch").switchButton("changeState",!!b.enable,!0),a("#wifiRangeSelect").val(b.powerLevel),a("#wifiRangeSelect").parent().find(".dropdown-toggle").text(a("#wifiRangeSelect").find("option:selected").text()),a("#sleepTime").val(b.autoDisableTime/60))}function d(){var c={enable:j.enable},d=a("#powerSaveSwitch").switchButton("checked"),e=Number(a("#wifiRangeSelect").val()),l=void 0===j.powerLevel?!1:!0;return k=null,k={enable:d?1:0},d&&(k.autoDisableTime=60*a("#sleepTime").val(),c.autoDisableTime=j.autoDisableTime,l&&(k.powerLevel=e,c.powerLevel=j.powerLevel)),isEqual(c,k)?(phonePage.showToast(a.i18n.prop("noChangeText"),"images/phone/saveFail.png"),void 0):(getConfigJSON(f,function(d){d.wlanOnOff===h.on&&l&&(c.enable===k.enable&&c.powerLevel!==k.powerLevel||c.enable!==k.enable&&(void 0!==k.powerLevel&&e!==i||void 0===k.powerLevel&&j.powerLevel!==i))?(a("#confirmOK").text(a.i18n.prop("wifiRebootOK")),a("#confirmText").text(a.i18n.prop("wifiRebootConfirmText")),a("#confirmPopup").popup("show")):callJSON(f,g,k,function(c){0===c.result?(b(),phonePage.showToast(a.i18n.prop("pSaveText"),"images/phone/saved.png")):(b(!0),phonePage.showToast(a.i18n.prop("failedText"),"images/phone/saveFail.png"))})}),void 0)}function e(){a("#powerSaveSwitch").switchButton({onChanged:function(b){b?(void 0!==j.powerLevel&&a("#wifiRangeGroup").show(),a("#sleepTimeGroup").show()):(a("#wifiRangeGroup").hide(),a("#sleepTimeGroup").hide())}}).switchButton("change"),a("#wifiRangeSelect").change(function(){var b=a(this);b.parent().find(".dropdown-toggle").text(b.find("option:selected").text())}),a("#sleepTime").blur(function(){var b=a(this);b.val()?is_integer(b.val(),1,1e5)?(b.parent().removeClass("alert"),a("#pAutoDisableInputErr").text("").hide()):(b.parent().addClass("alert"),a("#pAutoDisableInputErr").text(a.i18n.prop("sleepTimeInvalid")).show()):(b.parent().addClass("alert"),a("#pAutoDisableInputErr").text(a.i18n.prop("pEmptyErr")).show())})}var f="power_save",g=1,h={off:0,on:1},i=0,j={},k={};a.powerSaving={onLoad:function(){e()},onEnter:function(){a("#pageFooter").hide(),b(),a("#confirmBtn").unbind().click(function(){var b=a("#sleepTime");b.is(":visible")&&b.blur(),b.parent().hasClass("alert")||d()}),a("#confirmOK").unbind().click(function(){a("#confirmPopup").popup("hide"),callJSON(f,g,k,function(c){0===c.result?phonePage.beginProcess(WIFI_REBOOT_TIME,function(){window.location.reload()}):(b(!0),phonePage.showToast(a.i18n.prop("failedText"),"images/phone/saveFail.png"))})})},onLeave:function(){a("#pageFooter").show(),a("#sleepTime").parent().removeClass("alert"),a("#pAutoDisableInputErr").text("").hide()}}}(jQuery),function(a){function b(){phonePage.endHeartbeat(),AuthModel.logout(function(){phonePage.loadLogin()})}function c(){callJSON("reboot",f.POWEROFF,null,null),phonePage.beginProcess(SHUTDOWN_TIME,b)}function d(){callJSON("reboot",f.REBOOT,null,null),phonePage.beginProcess(REBOOT_TIME,b)}function e(){a("#pRebootBtn").click(function(){a("#confirmOK").text(a.i18n.prop("rebootBtn")),a("#confirmText").text(a.i18n.prop("rebootConfirmText")),a("#confirmPopup").popup("show")}),a("#pPowerOffBtn").click(function(){a("#confirmOK").text(a.i18n.prop("powerOffBtn")),a("#confirmText").text(a.i18n.prop("powerOffConfirmText")),a("#confirmPopup").popup("show")})}var f={REBOOT:0,POWEROFF:1};a.shutdown={onLoad:function(){e()},onEnter:function(){a("#confirmOK").unbind().click(function(){a("#confirmPopup").popup("hide"),a(this).text()===a.i18n.prop("rebootBtn")?d():a(this).text()===a.i18n.prop("powerOffBtn")&&c()}),a("#pageFooter").hide()},onLeave:function(){a("#pageFooter").show()}}}(jQuery),function(a){function b(b,c,d){a("#connectStatusImg").attr("src",imagePath+b),a("#pDialupStat").text(a.i18n.prop(c)),d?a("#linking").show():a("#linking").hide()}function c(a){a.wan.connectStatus;switch(a.wan.connectStatus){case k.disable:b("disconnected.png","disconnectedStatus",!1);break;case k.disconnected:b("disconnected.png","disconnectedStatus",!1);break;case k.connecting:b("connecting.png","connectingStatus",!0);break;case k.disconnecting:b("disconnecting.png","disconnectingStatus",!0);break;case k.connected:b("connected.png","connectedStatus",!1),2===a.wan.dataLimit&&b("data-alert-conn.png","titleDataExceed",!1)}}function d(b){if(b&&0===b.result){if(h=b,m=b.factoryDefault,b.wan.simStatus===l.pinReq||b.wan.simStatus===l.pukReq||b.wan.simStatus===l.permanentLock)return a("#statusSection").hide(),a("#pageFooter").hide(),b.wan.simStatus!==l.permanentLock?(simLocked=!0,a("#confirmBtn").show()):a("#confirmBtn").hide(),o.loadData(),clearInterval(g),a(".pinSection").show(),void 0;if(m)return modifyPswRemind=!0,phonePage.setContentPage("modifyPasswd"),void 0;a("#statusSection").show(),c(b),b.wan.enablePaymentDay?a("#pDataTotalUsed").text(a.i18n.prop("pDataMonthlyUsed")):a("#pDataTotalUsed").text(a.i18n.prop("pDataTotalUsed"));var d=byteAdapt(b.wan.totalStatistics);if(d[0]>1e5){var e=parseFloat(d[0]).toFixed(1);"0"==e[e.length-1]&&(e=e.substring(0,e.length-2)),a("#dataUsed").text(""+e)}else a("#dataUsed").text(""+d[0]);if(a("#dataUsedUnit").text(""+d[1]),a("#connClientCount").text(b.connectedDevices.number),b.wan.connectStatus===k.disconnected||b.wan.connectStatus===k.connecting)switch(a("#pNetworkType").text(a.i18n.prop("pSimStatus")),b.wan.simStatus){case l.invalid:a("#networkTypeVal").text(a.i18n.prop("simInvalid"));break;case l.noSim:a("#networkTypeVal").text(a.i18n.prop("noSim"));break;case l.error:a("#networkTypeVal").text(a.i18n.prop("simErr"));break;case l.ready:a("#networkTypeVal").text(a.i18n.prop("simReady"));break;case l.pinReq:a("#networkTypeVal").text(a.i18n.prop("pinReq"));break;case l.pinVerified:a("#networkTypeVal").text(a.i18n.prop("pinVerified"));break;case l.pukReq:a("#networkTypeVal").text(a.i18n.prop("pukReq"));break;case l.permanentLock:a("#networkTypeVal").text(a.i18n.prop("permanentLock"));break;default:a("#networkTypeVal").text(a.i18n.prop("simInvalid"))}else switch(a("#pNetworkType").text(a.i18n.prop("pNetworkType")),b.wan.networkType){case j.noService:a("#networkTypeVal").text(a.i18n.prop("noService"));break;case j.lte:a("#networkTypeVal").text(a.i18n.prop("lteType"));break;case j.wcdma:a("#networkTypeVal").text(a.i18n.prop("wcdmaType"));break;case j.cdma1x:a("#networkTypeVal").text(a.i18n.prop("cdma1xType"));break;case j.cdmaevdo:a("#networkTypeVal").text(a.i18n.prop("cdmaevdoType"));break;case j.tdscdma:a("#networkTypeVal").text(a.i18n.prop("tdscdmaType"));break;case j.gsm:a("#networkTypeVal").text(a.i18n.prop("gsmType"));break;default:a("#networkTypeVal").text(a.i18n.prop("noService"))}var f,i=b.battery.voltage;f=10>=i?0:10*Math.floor(i/10),b.battery.charging&&100!==f?a("#batteryImg").attr("src","images/phone/charging-"+f+".png"):a("#batteryImg").attr("src","images/phone/power-"+f+".png"),a("#batteryUsage").text(i+"%"),a("#wirelessBandVal").text(b.wlan.bandType?"5":"2.4"),b.wan.roamingEnabled?(a("#roamingImg").attr("src",imagePath+"roam-on.png"),a("#roamingVal").text(a.i18n.prop("pOn"))):(a("#roamingImg").attr("src",imagePath+"roam-off.png"),a("#roamingVal").text(a.i18n.prop("pOff"))),a("#ssidVal").text(b.wlan.ssid),b.wlan.mode?a("#ssidEncrypted").attr("src",imagePath+"encrypted.png"):a("#ssidEncrypted").attr("src",imagePath+"notEncrypted.png")}}function e(){a("#confirmBtn").hide(),getConfigJSON("status",d)}function f(){var b,c,d,e;a("#autoUnlockDiv img").click(function(){a("#autoUnlockChecked").toggle(),a("#autoUnlockUnchecked").toggle(),n=n?!1:!0}),a("#pinInput").blur(function(){b=a(this).val(),b?pinValid(b)?(a(this).parent().removeClass("alert"),a("#pinInputErr").text("").hide()):(i=!1,a(this).parent().addClass("alert"),a("#pinInputErr").text(a.i18n.prop("pinInvalid")).show()):(i=!1,a(this).parent().addClass("alert"),a("#pinInputErr").text(a.i18n.prop("pEmptyErr")).show())}),a("#pukInput").blur(function(){c=a(this).val(),c?pukValid(c)?(a(this).parent().removeClass("alert"),a("#pukInputErr").text("").hide()):(i=!1,a(this).parent().addClass("alert"),a("#pukInputErr").text(a.i18n.prop("pukInvalid")).show()):(i=!1,a(this).parent().addClass("alert"),a("#pukInputErr").text(a.i18n.prop("pEmptyErr")).show())}),a("#newPinInput").blur(function(){d=a(this).val(),d?pinValid(d)?(a(this).parent().removeClass("alert"),a("#newPinInputErr").text("").hide()):(i=!1,a(this).parent().addClass("alert"),a("#newPinInputErr").text(a.i18n.prop("pinInvalid")).show()):(i=!1,a(this).parent().addClass("alert"),a("#newPinInputErr").text(a.i18n.prop("pEmptyErr")).show())}),a("#confirmPinInput").blur(function(){e=a(this).val(),e?e!==d?(i=!1,a(this).parent().addClass("alert"),a("#confirmPinInputErr").text(a.i18n.prop("notSamePin")).show()):(a(this).parent().removeClass("alert"),a("#confirmPinInputErr").text("").hide()):(i=!1,a(this).parent().addClass("alert"),a("#confirmPinInputErr").text(a.i18n.prop("pEmptyErr")).show())})}var g,h,i=!0,j={noSevrice:0,gsm:1,wcdma:2,lte:3,tdscdma:4,cdma1x:5,cdmaevdo:6},k={disable:0,disconnected:1,connecting:2,disconnecting:3,connected:4},l={invalid:0,noSim:1,error:2,ready:3,pinReq:4,pinVerified:5,pukReq:6,permanentLock:7},m=!1,n=!0,o={simData:{},apiCardState:{absent:0,present:1,error:2},apiPinState:{unknown:0,notVerified:1,verified:2,disabled:3,pukLock:4,blocked:5},actions:{getConfig:0,enablePIN:1,disablePIN:2,modifyPIN:3,unlockPIN:4,unlockPUK:5,setAutoUnlock:6},setDivs:function(b,c){c||(c={}),c.pinInput?a("#pinInputDiv").show():a("#pinInputDiv").hide(),c.pukInput?a("#pukInputDiv").show():a("#pukInputDiv").hide(),c.autoUnlock?a("#autoUnlockDiv").show():a("#autoUnlockDiv").hide(),c.buttonTextId&&(a("#permanentLockDiv").show(),a("#confirmBtn").hide())},postData:function(){var b,c,d,e,f={},g=o.actions.getConfig;if(o.simData.cardState===o.apiCardState.present)switch(o.simData.pinState){case o.apiPinState.notVerified:if(b=a("#pinInput").val(),i=!0,a("#pinInput").blur(),!i)return!1;f.pin=b,f.autoUnlock=n,g=o.actions.unlockPIN;break;case o.apiPinState.pukLock:if(e=a("#pukInput").val(),c=a("#newPinInput").val(),d=a("#confirmPinInput").val(),i=!0,a("#pukInput").blur(),a("#newPinInput").blur(),a("#confirmPinInput").blur(),!i)return!1;f.puk=e,f.newPin=c,g=o.actions.unlockPUK}callJSON("simLock",g,f,function(b){0===b.result?(simLocked=!1,a(".pinSection").hide(),a("#confirmBtn").hide(),m?(modifyPswRemind=!0,phonePage.setContentPage("modifyPasswd")):(a("#pageFooter").show(),phonePage.setContentPage("status"))):(g===o.actions.unlockPIN?phonePage.showToast(a.i18n.prop("pinWrong")):g===o.actions.unlockPUK?phonePage.showToast(a.i18n.prop("pukWrong")):phonePage.showToast(a.i18n.prop("pinFailedText"),"images/phone/saveFail.png"),o.setContent(b))})},setPinAttempts:function(b){a("#remainingPinAttemptsLbl").html(a.i18n.prop("remainingPinAttempts")+'<span class="remainingNumber">'+b+"</span>")},setPukAttempts:function(b){a("#remainingPukAttemptsLbl").html(a.i18n.prop("remainingPukAttempts")+'<span class="remainingNumber">'+b+"</span>")},setContent:function(b){if(o.simData=b,b.pinRemainingTimes&&o.setPinAttempts(b.pinRemainingTimes),b.pukRemainingTimes&&o.setPukAttempts(b.pukRemainingTimes),b.cardState!==o.apiCardState.present)return a(".pinSection").hide(),phonePage.setContentPage("status"),void 0;switch(b.pinState){case o.apiPinState.notVerified:o.setDivs("SIMStatusPinLocked",{pinInput:!0,autoUnlock:!0});break;case o.apiPinState.pukLock:o.setDivs("SIMStatusPukLocked",{pukInput:!0,autoUnlock:!0});break;case o.apiPinState.blocked:o.setDivs("SIMStatusBlocked",{buttonTextId:"pinManagementRefresh"});break;default:return a(".pinSection").hide(),phonePage.setContentPage("status"),void 0}onConfirmBtnClick=function(){return o.postData()}},loadData:function(){getConfigJSON("simLock",o.setContent)}};a.status={onLoad:function(){f()},onEnter:function(){a(".toast").css("margin-top","42px"),e(),g=setInterval(e,1e4)},onLeave:function(){clearInterval(g)}}}(jQuery),function(a){function b(){getConfigJSON(e,c),a("#confirmBtn").unbind().click(function(){var b={},d=1;b.mode=a("#accessModeSelect").get(0).selectedIndex,b.login=a("#accessModeSelect").val()===f.byWifi?a("#loginPermissionSelect").get(0).selectedIndex:0,b.rwPermission=1,callJSON(e,d,b,function(b){0===b.result?(phonePage.showToast(a.i18n.prop("pSaveText"),"images/phone/saved.png"),getConfigJSON(e,c)):1===b.result&&phonePage.showToast(a.i18n.prop("failedText"),"images/phone/saveFail.png")})})}function c(b){a("#accessModeSelect").get(0).selectedIndex=b.mode,a("#accessModeSelect").change(),a("#loginPermissionSelect").get(0).selectedIndex=b.mode===Number(f.byWifi)?b.login:0,a("#loginPermissionSelect").change()}function d(){a("#accessModeSelect").change(function(){a("#accessModeSelect").parent().find(".dropdown-toggle").text(a("#accessModeSelect").find("option:selected").text()),a("#accessModeSelect").val()===f.byWifi?a("#loginPermissionSelect").parent().parent().slideDown("fast"):a("#loginPermissionSelect").parent().parent().slideUp("fast")}),a("#loginPermissionSelect").change(function(){a("#loginPermissionSelect").parent().find(".dropdown-toggle").text(a("#loginPermissionSelect").find("option:selected").text())})}var e="storageShare",f={byUsb:"0",byWifi:"1"};a.storageSharing={onLoad:function(){d()},onEnter:function(){a("#pageFooter").hide(),b()},onLeave:function(){a("#pageFooter").show()}}}(jQuery),function(a){function b(){a("#timeZoneSelect").change(function(){a("#timeZoneSelect").parent().find(".dropdown-toggle").text(a("#timeZoneSelect").find("option:selected").text()),newSelectedValue=Number(a("#timeZoneSelect").val()),f+=60*(g-newSelectedValue)*1e3,g=newSelectedValue})}function c(){a("#confirmBtn").unbind().click(function(){var b={},c=1;b.id=a("#timeZoneSelect").get(0).selectedIndex+"",b.timeZone=a("#timeZoneSelect").val(),callJSON(h,c,b,function(b){0===b.result&&(phonePage.showToast(a.i18n.prop("pSaveText"),"images/phone/saved.png"),getConfigJSON(h,d))})}),getConfigJSON(h,d)}function d(b){var c=b.hour,d=b.minute,h=b.second;10>c&&(c="0"+c),10>d&&(d="0"+d),10>h&&(h="0"+h),a("#timeZoneSelect").get(0).selectedIndex=Number(b.id),a("#timeZoneSelect").change(),a("#dataSpan").text(b.year+"/"+b.month+"/"+b.date),a("#timeSpan").text(c+":"+d+":"+h),g=Number(a("#timeZoneSelect").val()),clearInterval(i);var j=new Date(b.year,b.month-1,b.date,b.hour,b.minute,b.second);f=j.getTime()+1e3,i=setInterval(e,1e3)}function e(){var b=new Date(f),c=b.getFullYear(),d=b.getMonth(),e=b.getDate(),g=b.getHours(),h=b.getMinutes(),i=b.getSeconds();f+=1e3,a("#dataSpan").text(c+"/"+(d+1)+"/"+e),10>g&&(g="0"+g),10>h&&(h="0"+h),10>i&&(i="0"+i),a("#timeSpan").text(g+":"+h+":"+i)}var f,g,h="time",i=0;a.timeSettings={onLoad:function(){b()},onEnter:function(){a("#pageFooter").hide(),c()},onLeave:function(){clearInterval(i),a("#pageFooter").show()}}}(jQuery),function(a){var b=!0,c={moduleName:"wlan",percentage:0,progressTimer:0,serverData:{},noRegion:!1,securityMode:{noSecurity:0,wpaMixedSecurity:1},band:{shortBand:"0",longBand:"1"},setContent:function(){a("#backBtn").hide(),getConfigJSON(c.moduleName,c.loadData),a("#confirmBtn").unbind().click(function(){return c.checkSubmitData()?a("#ssidInput").val()!==c.serverData.ssid||a("#regionSelect").val()!==c.serverData.region||c.noRegion||a("#keyInput").val()!==c.serverData.mixed.key||a("#wirelessBandSelect").get(0).selectedIndex!==c.serverData.bandType||a("#pBroadcastSwitch").switchButton("checked")!==c.serverData.ssidBcast?(a("#confirmOK").text(a.i18n.prop("wifiRebootOK")),a("#confirmText").text(a.i18n.prop("wifiRebootConfirmText")),a("#confirmPopup").popup("show"),void 0):(phonePage.showToast(a.i18n.prop("noChangeText"),"images/phone/saveFail.png"),void 0):void 0}),a("#confirmOK").unbind().click(function(){var b={};b.action=1,a("#confirmPopup").popup("hide"),a("#pBroadcastSwitch").switchButton("checked")!==c.serverData.ssidBcast&&(b.ssidBcast=a("#pBroadcastSwitch").switchButton("checked")),b.ssid=a("#ssidInput").val(),b.region=c.noRegion&&c.serverData.expectRegion&&a("#regionSelect").parent().find(".dropdown-toggle").text()===region[c.serverData.expectRegion].country?c.serverData.expectRegion:a("#regionSelect").val(),b.mixed={},b.mixed.key=a("#keyInput").val(),""!==a("#keyInput").val()?(b.securityMode=c.securityMode.wpaMixedSecurity,b.mixed.mode=1):(b.securityMode=c.securityMode.noSecurity,b.mixed.mode=3),b.bandType=a("#wirelessBandSelect").get(0).selectedIndex,callJSON(c.moduleName,b.action,b,function(b){0===b.result?(a("#pExpectedRegionTips").hide(),a("#regionSelect").parent().removeClass("open"),phonePage.setContentPage("wireless"),a("#ssidInput").val()!==c.serverData.ssid||a("#regionSelect").val()!==c.serverData.region||c.noRegion||a("#keyInput").val()!==c.serverData.mixed.key||a("#wirelessBandSelect").get(0).selectedIndex!==c.serverData.bandType||a("#pBroadcastSwitch").switchButton("checked")!==c.serverData.ssidBcast?phonePage.beginProcess(WIFI_REBOOT_TIME,function(){window.location.reload()}):(phonePage.showToast(a.i18n.prop("pSaveText"),"images/phone/saved.png"),getConfigJSON(c.moduleName,c.loadData))):1===b.result&&phonePage.showToast(a.i18n.prop("failedText"),"images/phone/saveFail.png")})})},loadData:function(b){c.serverData=b,a("#ssidInput").val(b.ssid),a("#keyInput").val(b.mixed.key),a("#wirelessBandSelect").get(0).selectedIndex=b.bandType,a("#wirelessBandSelect").change(),a("#pBroadcastSwitch").switchButton("changeState",b.ssidBcast,!0),a("#pExpectedRegionTips").hide(),a("#regionSelect").parent().removeClass("open"),"NONE"===b.region?(c.noRegion=!0,b.expectRegion?(b.region=b.expectRegion,a("#regionSelect").parent().find(".dropdown-toggle").text(region[b.expectRegion].country),a("#pExpectedRegionTips").show(),a("#regionSelect").parent().addClass("open"),"NONE"==a("#regionSelect").get(0).options[0].value&&a("#regionSelect").get(0).remove(0)):(b.region="US",a("#regionSelect").parent().find(".dropdown-toggle").text(a.i18n.prop("selectRegion")))):(c.noRegion=!1,"NONE"==a("#regionSelect").get(0).options[0].value&&a("#regionSelect").get(0).remove(0),a("#regionSelect").val(b.region),a("#regionSelect").parent().find(".dropdown-toggle").text(a("#regionSelect").find("option:selected").text())),0===region[b.region].longBand.length&&(a("#wirelessBandSelect").attr("disabled",!0),a("#wirelessBandSelect").parent().addClass("disable"))},setupListeners:function(){var d,e;a("#pBroadcastSwitch").switchButton(),a("#regionSelect").change(function(){a("#regionSelect").parent().find(".dropdown-toggle").text(a("#regionSelect").find("option:selected").text()),a("#regionSelectErr").text(a.i18n.prop("regionErr")).hide(),0===region[a("#regionSelect").val()].longBand.length&&0!==region[a("#regionSelect").val()].shortBandEnd?(a("#wirelessBandSelect").get(0).selectedIndex=c.band.shortBand,a("#wirelessBandSelect").parent().find(".dropdown-toggle").text(a("#wirelessBandSelect").find("option:selected").text()),a("#wirelessBandSelect").attr("disabled",!0),a("#wirelessBandSelect").parent().addClass("disable")):0===region[a("#regionSelect").val()].shortBandEnd&&region[a("#regionSelect").val()].longBand.length>0?(a("#wirelessBandSelect").get(0).selectedIndex=c.band.longBand,a("#wirelessBandSelect").parent().find(".dropdown-toggle").text(a("#wirelessBandSelect").find("option:selected").text()),a("#wirelessBandSelect").attr("disabled",!0),a("#wirelessBandSelect").parent().addClass("disable")):(a("#wirelessBandSelect").attr("disabled",!1),a("#wirelessBandSelect").parent().removeClass("disable")),a("#pExpectedRegionTips").hide(),a("#regionSelect").parent().removeClass("open")}),a("#wirelessBandSelect").change(function(){a("#wirelessBandSelect").parent().find(".dropdown-toggle").text(a("#wirelessBandSelect").find("option:selected").text())}),a("#ssidInput").blur(function(){if(d=a("#ssidInput").val()){if(!checkSsidSanity(d))return b=!1,a(this).parent().addClass("alert"),a("#ssidInputErr").text(a.i18n.prop("invalidSSIDErr")).show(),!1;a(this).parent().removeClass("alert"),a("#ssidInputErr").text("").hide()}else b=!1,a(this).parent().addClass("alert"),a("#ssidInputErr").text(a.i18n.prop("emptySSIDErr")).show()}),a("#keyInput").blur(function(){if(e=a("#keyInput").val())if(checkWlanKeySanity(e))if(e.length<8)b=!1,a(this).parent().addClass("alert"),a("#keyInputErr").text(a.i18n.prop("shortKeyErr")).show();else if(64===e.length){for(var c,d="0123456789ABCDEFabcdef",f=0;64>f;f++)if(c=e.charAt(f),-1===d.indexOf(c))return b=!1,a(this).parent().addClass("alert"),a("#keyInputErr").text(a.i18n.prop("hexadecimalErr")).show(),!1;a(this).parent().removeClass("alert"),a("#keyInputErr").text("").hide()}else a(this).parent().removeClass("alert"),a("#keyInputErr").text("").hide();else b=!1,a(this).parent().addClass("alert"),a("#keyInputErr").text(a.i18n.prop("invalidKeyErr")).show();else a(this).parent().removeClass("alert"),a("#keyInputErr").text("").hide()}),a("#regionSelect").blur(function(){a("#regionSelect").parent().find(".dropdown-toggle").text()===a.i18n.prop("selectRegion")?(b=!1,a("#regionSelectErr").text(a.i18n.prop("regionErr")).show()):a("#regionSelectErr").text("").hide()})},checkSubmitData:function(){return b=!0,a("#ssidInput").blur(),a("#keyInput").blur(),a("#regionSelect").blur(),b?!0:!1}};a.wireless={onLoad:function(){c.setupListeners()},onEnter:function(){c.setContent(),getConfigJSON("status",function(b){"UN"===b.deviceInfo.productRegion&&a("#regionSelect").parent().parent().show()})},onLeave:function(){a(".alert").removeClass("alert"),a(".errTip").hide()}}}(jQuery),function(a){function b(){a("#wpsEnableSwitch").switchButton({onChanged:function(b){i?b?(a("#confirmBtn").hide(),a(".wpsConfig").slideDown("fast")):(a(".wpsConfig").slideUp("fast"),a("#confirmBtn").show()):a(".wpsConfig").hide()}}),a(".radio").radio(!0,".radio"),a("#pinRadio").radio("callback",function(){a("#wps_pinInput").val().length>0&&!d()}),a("#wps_pinInput").click(function(){a("#pinRadio").data("radio").setChecked(!0),a("#pbcRadio").data("radio").setChecked(!1)}),a("#pbcRadio").radio("callback",function(){a(".alert").removeClass("alert"),a(".errTip").hide()}),a("#pbcRadio").data("radio").setChecked(!0),a("#wps_pinInput").blur(function(){var b=a("#wps_pinInput").val();b?c(b)?(a(this).parent().removeClass("alert"),a("#wps_err_message").text("").hide()):(m=!1,a(this).parent().addClass("alert"),a("#wps_err_message").text(a.i18n.prop("invalidPinErr")).show()):(m=!1,a(this).parent().addClass("alert"),a("#wps_err_message").text(a.i18n.prop("pEmptyErr")).show())})}function c(a){for(var b,c="0123456789",d=0;d<a.length;d++)if(b=a.charAt(d),-1===c.indexOf(b))return!1;return 8!==a.length?!1:!0}function d(){return m=!0,a("#wps_pinInput").blur(),m?!0:!1}function e(){a("#confirmBtn").unbind().click(function(){isEqual(i,a("#wpsEnableSwitch").switchButton("checked"))?phonePage.showToast(a.i18n.prop("noChangeText"),"images/phone/saveFail.png"):(a("#confirmOK").text(a.i18n.prop("wifiRebootOK")),a("#confirmText").text(a.i18n.prop("wifiRebootConfirmText")),a("#confirmPopup").popup("show"))}),a("#confirmOK").unbind().click(function(){var b={};b.action=1,b.enable=a("#wpsEnableSwitch").switchButton("checked"),a("#confirmPopup").popup("hide"),a("#wps_err_message").text(""),callJSON(j,b.action,b,function(b){0===b.result?(l=0,phonePage.beginProcess(WPS_TIME,function(){window.location.reload()})):1===b.result&&phonePage.showToast(a.i18n.prop("failedText"),"images/phone/saveFail.png")})}),getConfigJSON(j,function(b){i=b.enable,a("#wpsEnableSwitch").switchButton("changeState",i,!0),a("#wpsOperateBtn").text(a.i18n.prop("wpsStartBtn")),a("#connectingImg").hide(),b.status===n.connecting?(a("#currentStatus").text(""),a("#connectingImg").show(),a("#wpsOperateBtn").text(a.i18n.prop("wpsCancelBtn")),k=window.setTimeout(g,3e3)):a("#currentStatus").text(a.i18n.prop("wpsIdle")),b.type===o.pin?(a("#pinRadio").data("radio").setChecked(!0),a("#wps_pinInput").val(b.pin)):b.type===o.pbc&&(a("#pbcRadio").data("radio").setChecked(!0),a("#wps_pinInput").text("")),b.enable&&a(".wpsConfig").slideDown("fast"),a(".wpsSection").show()})}function f(b){switch(b.status){case n.succeeded:a("#currentStatus").text(a.i18n.prop("wpsSucceed")),a("#wpsOperateBtn").text(a.i18n.prop("wpsStartBtn"));break;case n.failed:a("#currentStatus").text(a.i18n.prop("wpsFailed")),a("#wpsOperateBtn").text(a.i18n.prop("wpsStartBtn"));break;case n.connecting:a("#currentStatus").text(""),a("#connectingImg").show(),a("#wpsOperateBtn").text(a.i18n.prop("wpsCancelBtn")),k=window.setTimeout(g,3e3);break;case n.timeout:a("#currentStatus").text(a.i18n.prop("wpsTimeout")),a("#wpsOperateBtn").text(a.i18n.prop("wpsStartBtn"));break;case n.canceled:a("#currentStatus").text(a.i18n.prop("wpsCancel")),a("#wpsOperateBtn").text(a.i18n.prop("wpsStartBtn"));break;default:a("#currentStatus").text(a.i18n.prop("wpsIdle"))}b.status!==n.connecting&&a("#connectingImg").hide()}function g(){getConfigJSON(j,f)}function h(){a("#wpsOperateBtn").click(function(){if(a("#wpsOperateBtn").text()===a.i18n.prop("wpsStartBtn")){var b={};if(b.action=2,b.enable=!0,a("#pinRadio").data("radio").getChecked()){if(b.type=0,!d())return;
b.pin=a("#wps_pinInput").val()}else a("#pbcRadio").data("radio").getChecked()&&(b.type=1,b.pin="00000000");a("#wps_err_message").text(""),a("#wpsOperateBtn").text(a.i18n.prop("wpsCancelBtn")),a("#currentStatus").text(""),a("#connectingImg").show(),callJSON(j,b.action,b,function(a){0===a.result&&(k=window.setTimeout(g,3e3))})}else{var c={};c.action=3,c.enable=!0,a("#wps_err_message").text(""),a("#wpsOperateBtn").text(a.i18n.prop("wpsStartBtn")),a("#connectingImg").hide(),a("#currentStatus").text(a.i18n.prop("wpsCancel")),window.clearTimeout(k),callJSON(j,c.action,c,function(){})}})}var i,j="wps",k=0,l=0,m=!0,n={idle:0,succeeded:1,failed:2,connecting:3,timeout:4,canceled:5},o={pin:0,pbc:1};a.wps={onLoad:function(){b(),h()},onEnter:function(){a("#pageFooter").hide(),e()},onLeave:function(){a("input").val("").parent().removeClass("alert"),a("#wps_err_message").text("").hide(),k&&window.clearTimeout(k)}}}(jQuery),function(a){function b(a,b){this.init(a,b)}b.prototype={constructor:b,init:function(b,c){var d=this;a.extend(d,d.defaults,c),d.$container=a(b),d.noXButton||(d.$close=a('<div class="push-right icon-close popup-close"></div>'),d.$container.prepend(d.$close),d.$close.on({click:d.hide,mouseenter:function(){a(this).removeClass("icon-close").addClass("icon-close-hover")},mouseleave:function(){a(this).removeClass("icon-close-hover").addClass("icon-close")}},null,d)),d.$closeButtons&&d.$closeButtons.each(function(){a(this).on("click.popup",d,d.hide)}),d.hide()},hide:function(a){var b=this;a&&a.data&&(b=a.data),b.$container.hide(),b.$covers&&(b.$covers.remove(),b.$covers=void 0)},show:function(b){var c=this;b&&b.data&&(c=b.data);var d=a('<div class="cover"/>');d.css("z-index",7).appendTo("body"),c.$covers=d,c.$headers||(c.$headers=a("#header")),c.$headers.each(function(){d=a('<div class="cover"/>'),d.height(a(this).height()),a(this).append(d),c.$covers=c.$covers.add(d)}),c.$covers.bind("click",function(a){a.stopPropagation()}),c.$container.show()}},a.fn.popup=function(){var c=arguments;return this.each(function(){"string"==typeof c[0]?a(this).data("popup")[c[0]](c[1],c[2],c[3]):a(this).data("popup")||a(this).data("popup",new b(this,c[0]))})}}(jQuery),function(a){"use strict";var b=function(a,b,c){this.$element=a,this.selector=c||".radio","function"==typeof b&&(this.callback=b),this._init()};b.prototype.ckClass="icon-radio-checked",b.prototype.unckClass="icon-radio",b.prototype._init=function(){this.setChecked(!1),this.$element.click(a.proxy(function(a){a.preventDefault(),this.toggle(),this.getChecked()&&"function"==typeof this.callback&&this.callback()},this))},b.prototype.toggle=function(){this.getChecked()||(a(this.selector).each(function(){var c=a(this).data("radio");c||a(this).data("radio",c=new b(a(this),selector)),c.getChecked()&&c.setChecked(!1)}),this.setChecked(!0))},b.prototype.setChecked=function(a){var b=this.$element;a?(b.children(":eq(0)").attr("checked","checked"),b.children(":eq(1)").attr("src","images/phone/icon-radio-checked.png")):(b.children(":eq(0)").removeAttr("checked"),b.children(":eq(1)").attr("src","images/phone/icon-radio.png"))},b.prototype.getChecked=function(){return this.$element.children(":eq(0)").attr("checked")?!0:!1},b.prototype.setCallback=function(a){"function"==typeof a&&(this.callback=a)},a.fn.radio=function(c,d){return this.each(function(){var e=a(this),f=e.data("radio");f?"callback"===c&&f.setCallback(d):(f=new b(e,c,d),e.data("radio",f))})}}(jQuery),function(a){var b=function(a,b){this.init(a,b)};b.prototype.init=function(b,c){var d=this;c||(c={}),c.labelClass="switch-button-label",c.bgOnClass="switch-bg-on",c.bgOffClass="switch-bg-off",c.containerClass="switch",c.duration=200,c.dragThreshold=5,c.minleft=2,c.maxleft=37,d.settings=c,d.$input=a(b),d.state=d.settings.initState?!0:d.$input.prop("checked"),d.buildDiv(),d.state?(d.$container.addClass(d.settings.bgOnClass),d.$label.css("left",c.maxleft)):(d.$container.addClass(d.settings.bgOffClass),d.$label.css("left",c.minleft)),d.bindEvent()},b.prototype.bindEvent=function(){var b=this;b.$label.on("mousedown.switchButton",function(c){var d=a(c.target),e={left:parseInt(d.css("left"),10),pageX:c.pageX,Switch:b};return b.isClicking=!0,a(document).on({"mousemove.switchButton":b.onMouseMove,"mouseup.switchButton":b.onMouseUp,"click.switchButton":b.onClick},null,e),!1}),b.$input.click(function(){return!1}),b.$container.on("click.switchButton",null,b,b.onClick)},b.prototype.onClick=function(b){var c=b.data;return a(b.target).is("div")?(c.changeState(),!1):void 0},b.prototype.onMouseMove=function(a){if(a.data&&a.data.Switch&&a.data.Switch.isClicking){var b=a.data,c=b.Switch,d=c.settings,e=Math.min(Math.max(a.pageX-b.pageX+b.left,d.minleft),d.maxleft);return!c.dragging&&Math.abs(e-b.left)>d.dragThreshold&&(c.dragging=!0),c.$label.css("left",e),!1}},b.prototype.onMouseUp=function(b){if(b.data&&b.data.Switch&&b.data.Switch.isClicking){var c=b.data,d=c.Switch,e=parseInt(d.$label.css("left"),10);return d.dragging?e/d.settings.maxleft<.5?d.changeState(!1):d.changeState(!0):d.changeState(),d.dragging=!1,d.isClicking=!1,a(document).off(".switchButton"),!1}},b.prototype.changeState=function(a,b,c){var d=this,e=d.state;d.$label.stop(),d.state=void 0===a?a=!d.state:a,d.state?(d.$container.removeClass(d.settings.bgOffClass).addClass(d.settings.bgOnClass),b===!0?d.$label.css("left",d.settings.maxleft):d.$label.animate({left:d.settings.maxleft},d.settings.duration)):(d.$container.removeClass(d.settings.bgOnClass).addClass(d.settings.bgOffClass),b===!0?d.$label.css("left",d.settings.minleft):d.$label.animate({left:d.settings.minleft},d.settings.duration)),d.$input.prop("checked",d.state),e===a||c||d.settings.onChanged&&d.settings.onChanged(a)},b.prototype.checked=function(){return this.state},b.prototype.change=function(a){var b=this;"function"==typeof a?b.settings.onChanged=a:b.settings.onChanged&&b.settings.onChanged(b.$input.prop("checked"))},b.prototype.buildDiv=function(){var a=this;if(a.$input.parent().hasClass("switch")&&a.$input.next().hasClass(a.settings.labelClass))return a.$container=a.$input.parent(),a.$label=a.$input.next(),void 0;var b=a.$input.attr("class");a.$container=a.$input.wrap('<div class="'+a.settings.containerClass+(b?" "+b:"")+'"></div>').parent(),a.$label=a.$input.after('<label class="'+a.settings.labelClass+'"></label>').next()},a.fn.switchButton=function(c){var d=arguments,e=[],f=this.each(function(){var f=a(this),g=f.data("switch");if(g){if("string"==typeof d[0]){var h=g[d[0]](d[1],d[2],d[3]);void 0!==h&&e.push(h)}}else{if(!f.is("input"))return;f.data("switch",new b(f,c))}});return 0===e.length?f:1===e.length?e[0]:e}}(jQuery);